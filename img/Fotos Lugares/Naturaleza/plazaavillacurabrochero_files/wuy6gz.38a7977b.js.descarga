(this.$WP=this.$WP||[]).push(["wuy6gz",(n,t)=>{"use strict";var e,i,r,l,u,a,o,d,s,c,p,v,g,f,m,y,I,h,_="en",b=(n,t,e)=>{if(!n)return null;var i=Math.floor(n/60),r=n%60;if(i>24){var l=Math.floor(i/24);return t.string("attraction_product_duration_days_round_v1",{num:l})}if(i>0&&r>0){var u={hours:i,minutes:r};return e?t.string("nsp.duration.hoursminutes.v2",u):t.string("flight_search_results_duration_hour_and_minute",u)}return i>0?e?t.string("nsp.duration.hours.v2",{hours:i}):t.string("flight_search_results_duration_hour_only",{hours:i}):r>0?e?t.string("nsp.duration.minutes.v2",{minutes:r}):t.string("flights_app_minutes_and_class_ffffdca8",{minutes:r}):null},T=(n,t)=>{switch(n){case"MOBILE_ONLY":return t.string("my_bookings_a_mobile_ticket_accepted_short");case"PAPER":return t.string("my_bookings_a_paper_ticket_required_short");default:return null}},D=(n,t)=>{switch(n){case"PICKUP_EVERYONE":case"PICKUP_AND_MEET_AT_START_POINT":return t.string("attraction_booking_pickup");default:return""}},P=(n,t)=>n===_||t===n,x=(n,t)=>n.filter(Boolean).sort((n=>(t,e)=>{if(t===e)return 0;if(!t)return 1;if(!e)return-1;if(t.language===e.language)return 0;if(t.language===n)return-1;if(e.language===n)return 1;if(t.language===_)return-1;if(e.language===_)return 1;var i=t.displayLanguage||"",r=e.displayLanguage||"";return i<r?-1:i>r?1:0})(t)).map((n=>n.displayLanguage)).filter(Boolean).join(", "),k={__key:35877810359105,id:"20a174244b414c9b19bb92c6ddad67f6",loc:{},definitions:[]},S=()=>{var n=p(),t=o(),i=d(),r={query:k,pause:!0};if("AttractionProductReview"===n.page){var l=n.params.detailId;l&&(r={query:k,variables:{activityId:l,currency:t,language:i||"en"}})}var[u]=c(r);return e((()=>{var n,t,e,i,r=null==(n=u.data)?void 0:n.fullProduct,l=r&&r.length>0&&r[0]||null,a=null==(t=u.data)?void 0:t.locations,o=a&&a.length>0&&a[0]||null,d=null==(e=u.data)?void 0:e.travelersChoice,s=d&&d.length>0&&d[0]||{},c=null==(i=u.data)?void 0:i.legacyFullProduct,p=c&&c.length>0&&c[0]||null,{regionId:v,category:g,campaignType:f,ranking:m,year:y}=s,I=y&&v&&g&&f&&m?{regionId:v,category:g,campaignType:f,ranking:m,year:y}:null;if(l&&p){var h={currency:p.currencyCode,maxTravelersPerUnit:null,isTieredPricing:null,comparisonPrice:null,specialsDescription:null,...l.pricingInfo||null,fromPrice:p.priceFromNoRounding};l={...l,pricingInfo:h}}return{fetching:u.fetching,fullProduct:l,travelersChoice:I,location:o}}),[u.fetching,u.data])},w={GOOGLE:{machineTranslation:!0,providerName:"Google",providerImageUrl:"/img2/google/powered_by_google_translate.png"}},C=n=>{var{fullProduct:t}=m(),a=d(),o=u(),{localize:c}=s(),p=i(),v=r(),g=p&&v;return e((()=>{var e,i;if(!t)return null;var r,u=null==(e=t.uniqueContent)?void 0:e.briefDescription,d=null==(i=u)?void 0:i.text,s=!1;if(!d)if(null!=(r=t.fallbackUniqueContent)&&r.briefDescription){var p,v;g&&(u=null==(p=t.fallbackUniqueContent)?void 0:p.briefDescription,d=l((null==(v=u)?void 0:v.text)||"")),s=!0}else{var f;d=(null==(f=t.description)?void 0:f.text)||""}var m=((n,t)=>{var{source:e,vendor:i}=(null==n?void 0:n.translationInfo)||{},r="MACHINE_TRANSLATION"===e?{...w[i]}:null;return r&&r.providerImageUrl&&(r.providerImageUrl=t+r.providerImageUrl),r})(u,o),y=((n,t,e,i,r)=>{var l,u,a,o,d,s=((n,t)=>(n=>{switch(n){case"INSTANT":case"INSTANT_THEN_MANUAL":return!0;default:return!1}})(n)?t.string("shopping_cart_instant_confirmation"):"")(null==(l=n.bookingConfirmationSettings)?void 0:l.confirmationType,i),c=((n,t,e)=>{if(!n||n.length<1)return"";var i=n[0];if(!i)return"";var{feePercentage:r,fromDays:l,toDays:u}=i;return 0===r&&u&&u>1?-1===l&&2===u?e?t.string("exp_fully_refundable_24h"):t.string("attractions.booking.cancellation.short.free_cancellation_standard"):e?t.string("exp_fully_refundable_tooltip_numdays"):t.string("attractions.booking.cancellation.short.free_cancellation_up_to_2",{nNumDays:u}):""})(null==(u=n.cancellationConditions)?void 0:u.cancelConditions,i,r),p=((n,t)=>{var e=((n,t)=>((n,t)=>{if(!n||!n.from||!n.to)return null;var e={numFrom:n.from,numTo:n.to};switch(n.timeUnit){case"DAYS":return t.string("attraction_product_duration_days_range_v1",e);case"HOURS":return t.string("attraction_product_duration_hours_range_v1",e);case"MINUTES":return t.string("attraction_product_duration_minutes_range_v1",e);default:return null}})(null==n?void 0:n.flexibleDuration,t)||b(null==n?void 0:n.durationInMinutes,t)||"")(n,t);return e?t.string("attractions.merchandising.duration",{sDuration:e}):""})(n.detailedItineraryDto,i),v=(null==(a=n.languageServices)?void 0:a.languageInfoMap)||[],g=v.filter((n=>P(null==n?void 0:n.language,e))),f=v.filter((n=>!P(null==n?void 0:n.language,e))),m=x(g,e),y=f.length,I=x(f,e),h=(n=>{var t={supplierUrlIsObfuscated:!1},e=null==n?void 0:n.name;if(e){t.supplierName=e;var i=null==n?void 0:n.url;i&&(t.supplierUrl=i)}return t})(n.taSupplierInfo);return{voucher:T(null==(o=n.ticket)?void 0:o.ticketType,i),instantConfirmation:s,freeCancellation:c,primaryLanguages:m,additionalLanguages:I,additionalLanguagesCount:y,duration:p,hotelPickup:D(null==(d=n.travelerPickupData)?void 0:d.pickupOptionType,i),locale:n.locale||"",translationAttribution:t,supplierName:h.supplierName||"",supplierUrl:h.supplierUrl||"",supplierUrlisObfuscated:h.supplierUrlIsObfuscated}})(t,m,a,c,n);return{locale:t.locale,productText:d,productTextIsVUC:s,translationAttribution:m,amenities:y}}),[o,t,a,c,g,n])},N=({duration:n})=>{var{localize:t}=s();return n?v(g,{children:[f("br",{}),f("br",{}),f(a,{id:"attractions.merchandising.duration",args:{sDuration:b(n,t,!0)}})]}):null},A=({item:n})=>{var t,e,i,r;if(null==(t=n.poiLocation)||!t.description)return null;var l="NO_STOP"===n.admissionInclusionType?f(a,{id:"nsp.itinerary.long.description.pass.by.with.colon"}):f(a,{id:"nsp.itinerary.long.description.stop.at.with.colon"});return v(g,{children:[f("br",{}),f("br",{}),v("b",{children:[l," "]}),null==(e=n.poiLocation)?void 0:e.description,(null==(i=n.description)?void 0:i.text)&&v(g,{children:[f("br",{}),f("br",{}),null==(r=n.description)?void 0:r.text]}),f(N,{duration:n.durationInMinutes})]})},M=({items:n})=>n&&n.length?v(g,{children:[f("b",{children:f(a,{id:"attractions.booking.section.itinerary"})}),f("br",{}),f(a,{id:"nsp.itinerary.long.description.typical.message"}),n.filter(Boolean).map((n=>f(A,{item:n},n.order)))]}):null,O=({text:n})=>v(g,{children:[f("b",{children:f(a,{id:"attractions.booking.section.itinerary"})}),f("br",{}),f("br",{}),n]}),R=({fullProduct:n})=>{var t,e,i,r,u,a,o,d,s,c,p,v=(null==(t=n.fallbackUniqueContent)||null==(e=t.longDescription)?void 0:e.text)||(null==(i=n.detailedItineraryDto)||null==(r=i.legacyItineraryDto)||null==(u=r.longDescription)?void 0:u.text)||"",g=l(v);if(g)return g;var m=null==(a=n.detailedItineraryDto)||null==(o=a.activityItineraryDto)||null==(d=o.activityItem)||null==(s=d.description)?void 0:s.text;if(m)return f(O,{text:m});var y=null==(c=n.detailedItineraryDto)||null==(p=c.standardItineraryDto)?void 0:p.itineraryItems;return null!=y&&y.length?f(M,{items:y}):null},U=n=>{var t,e,i,r,l,u,a,o,d,s,c,p,v,g,f;return null!=(null==(t=n.uniqueContent)||null==(e=t.longDescription)?void 0:e.text)||null!=(null==(i=n.fallbackUniqueContent)||null==(r=i.longDescription)?void 0:r.text)||null!=(null==(l=n.detailedItineraryDto)||null==(u=l.legacyItineraryDto)||null==(a=u.longDescription)?void 0:a.text)||null!=(null==(o=n.detailedItineraryDto)||null==(d=o.activityItineraryDto)||null==(s=d.activityItem)||null==(c=s.description)?void 0:c.text)||(null!=(p=null==(v=n.detailedItineraryDto)||null==(g=v.standardItineraryDto)||null==(f=g.itineraryItems)?void 0:f.length)?p:0)>0},E=()=>{var{fullProduct:n}=m(),t=r();return e((()=>{var e,i,r,l;if(!n)return null;var u=null==(e=n.uniqueContent)||null==(i=e.longDescription)?void 0:i.text;return{introductionText:u,itineraryText:!u&&t&&f(R,{fullProduct:n}),itineraryTextIsVUC:!u&&null!=(null==(r=n.fallbackUniqueContent)||null==(l=r.longDescription)?void 0:l.text),isTextAvailable:U(n)}}),[n,t])},L=[11878,11921,11922,11934,12004,12005,12006,12007,12008,12083],q=[11875,11910,11916,11937,11958,11972,11983,11984,11985,11986,11987,11988,11989,12044,12045,12059,12060,20238,20248,20256],z=n=>{var t=n.startEndPoints;return t?t.flatMap((n=>{var t,e,i,r;if(!n)return[];var{location:l}=n;return l?"START"!==n.type&&"END"!==n.type&&"START_AND_END"!==n.type?[]:[{name:l.name,instruction:null==(t=n.locationInstructions)?void 0:t.text,address:null==(e=l.address)?void 0:e.readableFormat,startEndPointTypeEnum:n.type,latitude:null==(i=l.centre)?void 0:i.latitude,longitude:null==(r=l.centre)?void 0:r.longitude}]:[]})):null},V=()=>{var{fullProduct:n}=m();return e((()=>n?(n=>{if(!(n=>{var t,e,{tagIds:i}=n;if(i&&i.filter((n=>n&&h.has(n))).length>0)return!1;var r=null==n||null==(t=n.detailedItineraryDto)||null==(e=t.standardItineraryDto)?void 0:e.itineraryItems;if(!r)return!1;var l=r.filter((n=>!!n)).filter((n=>"NO_STOP"!==n.admissionInclusionType));return 0===l.length||l.filter((n=>!!n.durationInMinutes)).length>0})(n))return null;var t=z(n);if(!t)return null;var e=(n=>{var t,e,i=null==n||null==(t=n.detailedItineraryDto)||null==(e=t.standardItineraryDto)?void 0:e.itineraryItems;return i?i.flatMap((n=>{var t;if(!n)return[];var e=n.poiLocation;return e&&n.admissionInclusionType&&("NO"!==n.admissionInclusionType||n.durationInMinutes)&&n.description&&e.name&&e.centre&&"number"==typeof e.centre.latitude&&"number"==typeof e.centre.longitude?[{taLocationId:e.tALocationId,admissionInclusionTypeEnum:n.admissionInclusionType,durationInMinutes:n.durationInMinutes,name:e.name,description:null==(t=n.description)?void 0:t.text,latitude:e.centre.latitude,longitude:e.centre.longitude,serviceProvider:e.serviceProvider}]:[]})):null})(n);if(!e||!e.length)return null;var i=null==n?void 0:n.travelerPickupData;if(!i)return null;var{pickupOptionType:r,additionalInfo:l,endsAtStartPoint:u}=i;return r?{productItineraryItems:e,pickupTypeEnum:r,pickupAdditionalInfo:null==l?void 0:l.text,startEndPoints:t,endsAtStartPoint:!!u}:null})(n):null),[n])},B=()=>{var{fullProduct:n}=m();return e((()=>n?(n=>{var t=z(n);if(!t)return null;var e=(n=>{var t,e,i=null==n||null==(t=n.detailedItineraryDto)||null==(e=t.mdtItinerary)?void 0:e.days;return i?i.flatMap((n=>{var t;if(!n)return[];var e=(n=>{var t=null==n?void 0:n.accommodations;return t?t.flatMap((n=>n&&n.description?[{description:n.description.text}]:[])):null})(n);if(!e)return[];var i=(n=>{var t=null==n?void 0:n.foodAndDrinks;return t?t.flatMap((n=>{if(!n)return[];var{inclusion:t}=n;return t&&t.description&&t.type?[{inclusion:{description:t.description.text,inclusionTypeEnum:t.type}}]:[]})):null})(n);if(!i)return[];var r=(n=>{var t=null==n?void 0:n.pois;return t?t.flatMap((n=>{var t;if(!n)return[];var{location:e}=n;return e&&n.admissionInclusionType&&n.description&&e.name&&e.centre&&"number"==typeof e.centre.latitude&&"number"==typeof e.centre.longitude?[{taLocationId:e.TALocationId,admissionInclusionTypeEnum:n.admissionInclusionType,durationInMinutes:n.durationInMinutes,name:e.name,description:null==(t=n.description)?void 0:t.text,latitude:e.centre.latitude,longitude:e.centre.longitude}]:[]})):null})(n);return r?[{groupNumber:n.groupNumber,title:null==(t=n.title)?void 0:t.text,accommodations:e,foodAndDrinks:i,productItineraryItems:r}]:[]})):null})(n);if(!e||!e.length)return null;var i=null==n?void 0:n.travelerPickupData;if(!i)return null;var{pickupOptionType:r,additionalInfo:l,endsAtStartPoint:u}=i;return r?{mdtProductItineraryDays:e,pickupTypeEnum:r,pickupAdditionalInfo:null==l?void 0:l.text,startEndPoints:t,endsAtStartPoint:!!u}:null})(n):null),[n])},F={__key:0xc75e97f721ac,id:"c75e97f721ac5ecd967bb64b279e066f",loc:{},definitions:[]},j=(n,t)=>n.map(((n,e)=>{var i,r,l,u,a,o,d,s,c,p,v=null==t||null==(i=t.reviews)||null==(r=i[e])?void 0:r.userProfile,g=new Date((null==n||null==(l=n.tripInfo)?void 0:l.stayDate)||"").toDateString().split(" "),f=`${g[1]} ${g[3]}`,m=((null==n?void 0:n.photos)||[]).map((n=>{var t,e,i;return(null==n||null==(t=n.photo)||null==(e=t.photoSizes)||null==(i=e[0])?void 0:i.url)||""}));return{reviewId:(null==n?void 0:n.id)||0,rating:(null==n?void 0:n.rating)||0,relativePublishedDate:"",dateText:new Date((null==n?void 0:n.publishedDate)||"").toDateString().split(" ").slice(1).join(" ")||"",mobile:"MOBILE"===(null==n?void 0:n.publishPlatform),experienceDate:f||"",displayTitle:(null==n?void 0:n.title)||"",displayText:(null==n?void 0:n.text)||"",location:(null==v||null==(u=v.hometown)||null==(a=u.location)||null==(o=a.additionalNames)?void 0:o.long)||"",screenName:(null==n?void 0:n.username)||"",helpfulVotes:(null==v||null==(d=v.contributionCounts)?void 0:d.helpfulVote)||0,publishedReviews:(null==v||null==(s=v.contributionCounts)?void 0:s.sumReview)||0,productName:(null==n?void 0:n.productName)||"",avatarUrl:(null==(c=((null==v||null==(p=v.avatar)?void 0:p.photoSizes)||[]).slice().shift())?void 0:c.url)||"",photoUrls:m}})),H=[],W=()=>{var n,{fullProduct:t}=m(),i=(null==t?void 0:t.taSupplierInfo)||null,r=(null==t?void 0:t.reviewSummary)||null,l=(null==r?void 0:r.tripAdvisorRatingCount)||0,u=(null==r?void 0:r.viatorRatingCount)||0,a=(null==t||null==(n=t.supplierReviews)?void 0:n.reviews)||H,o={query:F,variables:{reviewId:a.map((n=>(null==n?void 0:n.id)||0))||[]}},[d]=c(o),s=null==d?void 0:d.data;return e((()=>{var n,e,r,o,d,c,p,v,g,f,m,y,I,h,_;return{supplierId:(null==t?void 0:t.taSupplierLocationId)||0,supplierName:(null==i?void 0:i.name)||"",supplierUrl:(null==i?void 0:i.url)||"",totalReviewCount:(null==i||null==(n=i.reviewSummary)?void 0:n.count)||0,overallRating:(null==i||null==(e=i.reviewSummary)?void 0:e.rating)||0,productReviewCount:l+u,hasOnlyViatorReviews:0===l&&0!==u,hasCertificateOfExcellence:!1,supplierReviews:j(a,s),supplierThumbnailPhotoSizes:null!=(r=null==i||null==(o=i.thumbnail)||null==(d=o.photoSizes)?void 0:d.filter(Boolean))?r:[],supplierLocation:null!=(c=null==i||null==(p=i.locationV2)||null==(v=p.names)?void 0:v.longOnlyHierarchyTypeaheadV2)?c:null,supplierRankingText:null!=(g=null==t||null==(f=t.aboutOperator)?void 0:f.rankingSupplierText)?g:null,supplierPublishedDate:null!=(m=null==t||null==(y=t.aboutOperator)?void 0:y.publishedDate)?m:null,supplierCountry:null!=(I=null==i||null==(h=i.locationV2)||null==(_=h.names)?void 0:_.nationalParentName)?I:null}}),[t,a,s,i,l,u])},$=()=>{var{fullProduct:n}=m();return e((()=>{var t,e;return{numberOfReviews:null==n||null==(t=n.reviewSummary)?void 0:t.tripAdvisorRatingCount,averageRating:null==n||null==(e=n.reviewSummary)?void 0:e.tripAdvisorAvgRating}}),[n])};return[()=>{m=S,y=C,I=E,h=new Set([...L,...q]),n({useMDTProductItineraryModel:B,useOverviewModel:y,useProductItineraryModel:V,useProductReviewsCount:$,useSupplierTrustData:W,useWhatToExpectModel:I})},[n=>e=n.useMemo,n=>(i=n.useIsRobotSafe,r=n.useIsMounted),n=>l=n.decodeStringWithJSBase64,n=>u=n.useCdnPrefix,n=>(a=n.default,o=n.useCurrency,d=n.useLanguage,s=n.useLocalize),n=>c=n.useQuery,n=>p=n.useRoute,n=>(v=n.jsxs,g=n.Fragment,f=n.jsx)]]},["1o4yt4","1mb2nz","1v42v3","1s6q22","17thqz","1mqwhq","fgwvq1","121h32"]]);
