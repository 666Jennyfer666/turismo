(this.$WP=this.$WP||[]).push(["1rfo7h",(e,s)=>{"use strict";var n,t,r,o,i,a,u,p,l,g,m,c,_,h,S,I,d,f,v,b,w,k,L=({pause:e,logImpression:s})=>t({experiment:"attractions_list_page_membership_banner_1681742647",logImpression:s},e),P="list_page_membership_banner_1678826829",E=({pause:e=!1,skipImpression:s=!1})=>{var n=i({experimentKeys:[P],skipImpression:s},e);return{fetching:null===n,bucket:null==n?void 0:n[P]}},A=({pause:e,logImpression:s})=>t({experiment:"membership_banner_and_heart_icon_prompt_test_1678827009",logImpression:s},e),y="list_page_banner",B=(e,s)=>{var t=n(),r=a(),o=e&&f.has(r),i=u(),p=s.includes(i);return!t&&!o&&p},N=(e=!1)=>{var s=B(e,["Restaurants","FindRestaurants"]),{bucket:n}=I({pause:!s,skipImpression:!1}),{bucket:t}=d({pause:!s,logImpression:!0});return s&&(n===y||t===y)},O=(e=!1)=>{var s=B(e,["AttractionsFusion","AttractionProductsFusion"]),{bucket:n}=S({pause:!s,logImpression:!0}),t=B(e,["AttractionsFusion"]),{bucket:r}=d({pause:!t,logImpression:!0});return s&&n===y||t&&r===y},T=()=>{var e=B(!0,["HotelsFusion"]),{bucket:s}=I({pause:!e,skipImpression:!1});return e&&s===y},x=6048e5,F=e=>{switch(e){case"heart_icon":return"softLoginPromptSessions";case"global_nav_review":return"softLoginGlobalReviewPromptSessions";case"global_nav_sign_in":return"softLoginGlobalSignInPromptSessions";default:throw r(e),new Error(`Storage key not considered for experiment ${e}`)}},G=(e,s)=>{var n=l.get(s),t=e-x;return(n?JSON.parse(n):[]).filter((e=>e.dateShown>t))},H=(e,s=!1)=>{var n=p(),[t,r]=g(!1),o=F(e),i=u();return m((()=>{if(!s)try{var e=(new Date).getTime(),t=G(e,o).map((e=>e.sessionId));if(t.length>=2||t.includes(n))return void r(!1);r(!0)}catch(e){r(!1),console.error("Failed to parse JSON: ",e)}}),[i,s,n,o]),!!s||t},R=e=>{var s=p(),n=F(e);return()=>{try{var e=(new Date).getTime(),t=G(e,n),r=t.map((e=>e.sessionId));if(r.length>=2||r.includes(s))return;var o={sessionId:s,dateShown:e};l.set(n,JSON.stringify([...t,o]),x)}catch(e){console.error("Failed to parse soft login prompt sessions JSON: ",e)}}},U=["AttractionsFusion","Restaurants","FindRestaurants"],V=()=>{var e=n(),s=u(),t=c(),r=U.includes(s),o="MOBILE"===t,{fetching:i,bucket:a}=d({pause:!!e||!r||o,logImpression:!1});return!e&&r&&!o&&!i&&"heart_icon_prompt"===a},C=(e,s,n)=>!(1!==e||"RESERVATION"===s&&"1"===n||"ALL_OPTIONS"===s&&"10600"===n||"ESTABLISHMENT_TYPE"===s&&"12208"===n),M=({pause:e,logImpression:s})=>t({experiment:"global_navigation_membership_prompt_test_1678827275",logImpression:s},e),q=({pause:e,logImpression:s})=>t({experiment:"nvt_reco_acq_evergreen_home_1671224434",logImpression:s},e),D=e=>J("sign_in",e),J=(e,s)=>{var t=n(),r=u(),o="DESKTOP"===c(),{fetching:i,isValid:a}=K(r),{fetching:p,isValid:l}=$(r,!!t||!o||a),g=!i&&a||!p&&l,m=!(!t&&o&&g&&s),{fetching:_,bucket:h}=v({pause:m,logImpression:!0});return!t&&o&&g&&s&&!_&&("review"===e?"review_global_nav_prompt"===h:"sign_in_global_nav_prompt"===h)},K=e=>{var s=a(),n=!w.has(s),t=o()||0,{countryGeoId:r,fetching:i}=_("Tourism"!==e||n),u=!k.has(t)&&(r===h||t===h);return{fetching:i,isValid:"Tourism"===e&&(u||n)}},$=(e,s)=>{var{fetching:n,bucket:t}=b({pause:s||"Home"!==e,logImpression:!1});return{fetching:n,isValid:"Home"===e&&(!t||"Control_No Ads"===t)}};return[()=>{S=L,I=E,d=A,f=new Set(["en-AU","en-CA","en-GB","en-HK","en-IE","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US","en-ZA"]),v=M,b=q,w=new Set(["en-US"]),k=new Set([54171,28970,35805,187147,189158,1954828,187895,189970]),e({isSoftLoginPromptEligibleRestaurantsShelf:C,useIsSoftLoginPromptSessionEligible:H,useListPageMembershipBannerBucket:I,useMembershipBannerAndHeartIconBucket:d,useShowSoftLoginBannerAttractions:O,useShowSoftLoginBannerHotels:T,useShowSoftLoginBannerRestaurants:N,useShowSoftLoginGlobalSignInPrompt:D,useShowSoftLoginHeartIconPrompt:V,useUpdateSoftLoginPromptSessions:R})},[e=>n=e.useUserId,e=>(t=e.useExperimentBucket,r=e.exhaustivenessCheck,o=e.useGeoId),e=>i=e.default,e=>a=e.useLocale,e=>u=e.default,e=>p=e.useSessionId,e=>l=e.default,e=>(g=e.useState,m=e.useEffect),e=>c=e.useViewportCategory,e=>(_=e.useCountryGeoId,h=e.US_GEO_ID)]]},["52far5","a2qxj9","gugp1d","17thqz","eqoaya","1al4vi","19b9b1","1o4yt4","1ys6v1","b3ve7j"]]);
