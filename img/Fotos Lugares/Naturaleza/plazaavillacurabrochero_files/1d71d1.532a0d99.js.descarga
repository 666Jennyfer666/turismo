(this.$WP=this.$WP||[]).push(["1d71d1",(e,t)=>{"use strict";var l,a,r,n,i,o,s,d,u,c,m,p,h,v,f,g,b,_,S,y,F,C,x,T,R,k,w,P,N,W,E,O,B,A,L,M,V,G,I,D,z,$,K,U,j,H,q,Y,X,J,Z,Q,ee,te,le,ae,re,ne,ie,oe,se,de,ue,ce,me,pe,he,ve,fe,ge,be,_e,Se,ye,Fe,Ce,xe,Te,Re,ke,we,Pe,Ne,We,Ee,Oe,Be,Ae,Le,Me,Ve,Ge,Ie,De,ze,$e,Ke,Ue,je,He,qe,Ye,Xe,Je,Ze,Qe,et,tt,lt="attractionType",at="REMOVE",rt={mapCardCategoryClick:{clientContext:"mapCardCategory",clientParameter:"click"},mapFilterEnterClick:{clientContext:"mapFilter",clientParameter:"enterClick"},mapFilter:{clientContext:"mapFilter"},mapFilterFilterSelect:{clientParameter:"filterSelect"},mapFilterFilterDeselect:{clientParameter:"filterDeselect"}},nt=({id:e,value:t,onSelect:l,children:a,selected:r,disabled:n=!1,typename:i})=>R("div",{className:F("UzBXL _W",{QHUnV:n}),children:R(C,{id:e,value:t,checked:r,disabled:n,onToggle:(e,t)=>{l(t)},label:R(y,{variant:"body-01",children:a}),variant:"WebPresentation_BubbleRatingFilterValue"===i?"trailCentered":"trail"})}),it=({value:e,onSelect:t,children:l,selected:a,disabled:r})=>R("div",{className:F({"upsem W4":r}),children:R(P,{value:e,"aria-label":e,disabled:r,checked:a,onChange:()=>{t(!a)},marginRight:"spacing-01",marginY:"spacing-01",children:R(y,{variant:"body-01",children:l})})}),ot="QLisw v k u B- Cg _T Wc P0 w MJ",st="vzjGd",dt="aGXIZ",ut="kdGvD Wi u",ct="FUSION_FILTERS_COLLAPSED_SECTION",mt=e=>{var[t,r]=l(!1);return H((()=>{r((e=>{var t=j.get(ct);return!0===(null==t?void 0:t[e])})(e))}),[e]),a((()=>({isCollapsed:t,updateCollapsed:t=>{((e,t)=>{var l=j.get(ct);null==l&&(l={}),l[e]=t,j.set(ct,l)})(e,t),r(t)}})),[t,e])},pt=()=>{var{localize:e}=g(),{trackClick:t}=S({clientContext:"showFilterTooltip"});return R($,{triggeringElement:R(y,{marginLeft:"spacing-02",elementType:"div",variant:"title-05",children:R(I,{})}),content:e.string("attractions.filters.languages_offered_tooltip"),variant:"top-caret",onShowTooltip:t})},ht=({name:e,ariaLabelledBy:t,headerText:l="",headerRightExtraContent:a,headerElementType:n,tooltip:i,children:o})=>{var{isCollapsed:s,updateCollapsed:d}=_e(e),{trackClick:u}=S({clientContext:(s?"expand":"collapse")+"Filter"}),m=r((()=>{d(!s),u()}),[s,d,u]),p=r((e=>{var{keyCode:t}=e;t===K?(d(!0),u(),e.preventDefault()):t===U&&(d(!1),u(),e.preventDefault())}),[d,u]),h=(e=>`${e}_filter_contents`)(e);return k(c,{variant:"stack",gap:"gapless",children:[null!=l&&k("div",{className:ot,children:[k("div",{className:dt,children:[R(y,{id:t,elementType:n,variant:"title-04",children:l}),"language"===e?R(pt,{}):i,k("button",{type:"button",className:"EsAAw _S B- NL",onClick:m,onKeyDown:p,"aria-expanded":!s,"aria-controls":h,children:[R(G,{}),R(s?D:z,{size:20})]})]}),null!=a?R("div",{className:ut,children:a}):null]}),R("div",{"data-filter-name":e,id:h,className:F(st,{VeSkP:s}),children:o})]})},vt=({id:e,name:t,headerElementType:l,headerText:a,headerRightExtraContent:r,tooltip:n,children:i})=>k(c,{variant:"stack",gap:"gapless",children:[null!=a&&k("div",{className:ot,children:[k("div",{className:dt,children:[R(y,{id:e,elementType:l,variant:"title-04",children:a}),R("span",{className:"xxIPZ NL",children:n})]}),null!=r&&R("div",{className:ut,children:r})]}),R("div",{"data-filter-name":t,className:st,children:i})]}),ft=({name:e,headerText:t,headerRightExtraContent:l,headerElementType:a="div",tooltip:r,isCollapsible:n=!1,ariaLabelledBy:i,children:o})=>n?R(ht,{ariaLabelledBy:i,name:e,headerText:t,headerRightExtraContent:l,headerElementType:a,tooltip:r,children:o}):R(vt,{name:e,id:i,headerText:t,headerElementType:a,headerRightExtraContent:l,tooltip:r,children:o}),gt=(e,t)=>[...new Map([...e,...t].map((e=>[`${e.name}-${e.value}`,e]))).values()],bt=(e=0,t=0)=>{var[l,a]="leftRail"===i(Ce)?ye:Fe;return[e>0?e:l,t>0?t:a]},_t=(e,t)=>null!=e.filterName?e.filterName:t,St={whiteBackground:"uGWfC u j w Z1",header:"FOuFZ",itemList:"MCOlU _A v K",item:"vcxvt",searching:"KgHGt",searchable:"XWeCT",unmatched:"JRAZH"},yt=e=>{if(e){if("WebPresentation_SimpleTextFilterValue"===e.__typename)return e.localizedText;if("WebPresentation_TextFilterValue"===e.__typename)return e.text.text}return null},Ft=({title:e,name:t,values:a,onClose:n,onApply:i,renderOption:d,singleSelect:u=!1,mapSurface:c=!1})=>{var[p,h]=l(null),[v,b]=l(""),_=o(),C=o(),x=o(),T=o(),[P,N]=(e=>{var[t,a]=l(""),r=o();return s((()=>{r&&r.current?a(r.current.textContent):"string"==typeof e&&a(e)}),[e]),[r,t]})(e),O=r((e=>b(e.target.value)),[]),B=r((()=>b("")),[]),{localize:A}=g(),{trackClick:L}=S(),{desktop:M,mobile:V}=m();s((()=>{h(null)}),[a]),s((()=>{var e;return e&&clearTimeout(e),e=setTimeout((()=>{((e,t,l)=>{var a=!1,r=(e||"").toLowerCase();""!==r&&(a=!0);var n=!1;St.searching.split(" ").forEach((e=>{t.classList.toggle(e,a)})),[...t.querySelectorAll(xe)].forEach((e=>{var t=(e.textContent||"").toLowerCase().includes(r);n=n||t,St.unmatched.split(" ").forEach((l=>{e.classList.toggle(l,a&&!t)}))})),n?l.classList.add(...St.unmatched.split(" ")):l.classList.remove(...St.unmatched.split(" "))})(v,_.current,C.current)}),300),()=>{e&&clearTimeout(e)}}),[v]);var G=()=>{L({clientContext:c?"mapFilter":"applyFilterOptionsModal",clientParameter:c?"save":null}),i&&p&&i(p),n()};if(!a)return null;var I=((e,t,l,a=!1)=>{if(a){var r,n,i=(null==(r=l.find((({selected:e})=>e)))?void 0:r.value)||null,o=(null==(n=t.find((({isSelected:e})=>e)))?void 0:n.value)||null,s=i||o;return t.map((t=>({...t,filterName:_t(t,e),isSelected:s===t.value})))}var d,u=(d=l,Object.fromEntries(d.map((e=>[e.value,e]))));return t.map((t=>({...t,filterName:_t(t,e),isSelected:t.value in u?u[t.value].selected:t.isSelected})))})(t,a.filter(Boolean),p||[],u),D=Te.has(t)?I:(e=>[...e].sort(((e,t)=>{if(null==e.object)return null!=t.object?1:0;if(null==t.object)return-1;var l=yt(e.object),a=yt(t.object);return null!==l&&null!==a?l.localeCompare(a):0})))(I),z=k(w,{children:[R("ul",{className:St.itemList,ref:_,children:D.map((e=>R("li",{className:F(St.item,St.searchable),children:d(e,(l=>{((e,t,l)=>{h(gt(u||!p?[]:p,[{name:e,value:t,selected:l}]))})(null!=e.filterName?e.filterName:t,e.value,l)}))},e.value)))}),k("div",{className:St.unmatched,ref:C,children:[R("br",{}),R(y,{variant:"title-04",children:R(f,{id:"fusion_filters_search_no_results"})}),R(y,{variant:"expressive-body-01",children:R(f,{id:"fusion_filters_search_no_results_retry"})})]})]}),$=A.string("phoenix_accessibility_back_label"),K=c?R(E,{variant:"clear",icon:Z,"aria-label":$,size:"small",onClick:G,ref:T}):null,U=c?"none":"right";return M?k(X,{title:R("div",{className:St.whiteBackground,children:null!=e&&R("div",{className:St.header,children:R(y,{elementType:"h4",variant:V?"title-05":"title-01",children:R("span",{ref:P,children:e})})})}),primaryButton:k(W,{variant:"primary",size:"small",onClick:G,children:[R(f,{id:"sng_fusion_list_filters_modal_apply"})," "]}),onClose:()=>{L({clientContext:c?"mapFilter":"closeFilterOptionsModal",clientParameter:c?"close":null}),n()},closeButtonPosition:U,backButton:K,variant:"fixed-height-sticky-footer",widthOption:"fixed-60",heightOption:"fixed-80",children:[R(J,{onChange:O,onClear:B,value:v,placeholder:A.string("common_Search")}),z]}):k(Y,{deprioritizeRef:x,slideFrom:"right",buttonStyle:"inline",header:R("div",{className:St.whiteBackground,children:null!=e&&R("div",{className:St.header,children:R(y,{elementType:"h4",variant:V?"title-05":"title-01",children:R("span",{ref:P,children:e})})})}),primaryButton:k(W,{variant:"primary",size:"small",onClick:G,children:[R(f,{id:"sng_fusion_list_filters_modal_apply"})," "]}),onClose:G,closeButtonPosition:"left",closeButtonIcon:Z,heightOption:"full",widthOption:"full",children:[R(J,{ref:x,onChange:O,onClear:B,value:v,placeholder:A.string("common_Search")}),z]})},Ct=()=>k(w,{children:[R(f,{id:"fusion_list_show_more_filters"}),R(y,{marginX:"spacing-02",variant:"button-01",display:"inline",children:R(D,{})})]}),xt=()=>k(w,{children:[R(f,{id:"fusion_list_show_less_filters"}),R(y,{marginX:"spacing-02",variant:"button-01",display:"inline",children:R(z,{})})]});function Tt({onClick:e,ariaContentId:t,expanded:l,disabled:a=!1}){return R(O,{disabled:a,variant:"accent",onClick:e,ariaAttributes:{"aria-expanded":l,"aria-controls":t},children:R(y,{variant:"button-01",children:R(l?xt:Ct,{})})})}var Rt="FOsuu _A M0 P0 w f G K v",kt=()=>{},wt=({ariaAttributes:e,trackingDetails:t,children:l,onClick:a,disabled:r})=>{var{trackClick:n}=S(t);return R(O,{disabled:r,variant:"accent",onClick:()=>{n(),a()},ariaAttributes:e,children:R(y,{variant:"button-01",children:l})})},Pt=()=>R(f,{id:"fusion_list_show_all_filters"}),Nt=({parentKey:e,name:t,title:l,tooltip:a,children:r,headerRightExtraContent:n})=>{var{desktop:i}=m();return R(Se,{name:t,headerText:l,headerRightExtraContent:n,tooltip:a,isCollapsible:t!==B&&i,ariaLabelledBy:e,children:r})},Wt=({filterName:e,values:t,renderOption:l,onApply:a,hideAfter:r=-1,singleSelect:n=!1,disabled:i=!1,inlineItems:o=!1})=>{var s=(t||[]).map((t=>({name:null!=t.filterName?t.filterName:e,value:t.value,selected:t.isSelected})));return R("ul",{className:F("rating"===e?[Rt,"BznuA"]:Rt),children:t.map(((t,d)=>R("li",{className:F({"nhbCY M0 f G":!0,rDCUP:o,cTSYu:r>0&&d>=r&&!t.isSelected}),children:l(t,(l=>{var r=gt(n?s.map((({name:e,value:t})=>({name:e,value:t,selected:!1}))):s,[{name:null!=t.filterName?t.filterName:e,value:t.value,selected:l,disabled:i}]);a(r)}))},t.value)))})},Et=({parentKey:e,title:t,tooltip:a,headerRightExtraContent:r,filterName:n,values:o,viewMoreLimit:s=we,renderOption:d,onApply:u,singleSelect:c,disabled:m=!1})=>{var p=o.map((e=>!0===e.isSelected)).lastIndexOf(!0)>s-1,[h,v]=l(p),f=h?"showLessFilterOptions":"showMoreFilterOptions",{trackClick:g}=S({clientContext:f}),b=o.length>s,_=`${n}_filter_options`,y="filterModal"===i(Ce);return k(Nt,{name:n,title:t,tooltip:a,parentKey:e,headerRightExtraContent:r,children:[R(Wt,{filterName:n,singleSelect:c,onApply:u,values:o,hideAfter:h?-1:s,renderOption:d,disabled:m,inlineItems:y}),b?R(Tt,{disabled:m,expanded:h,ariaContentId:_,onClick:()=>{g(),v(!h)}}):null]})},Ot=({singleSelect:e,parentKey:t,title:a,tooltip:n,filterName:o,values:s,onApply:d=kt,renderOption:u,modalRenderOption:c,viewMoreLimit:m=ke,disabled:p=!1,mapSurface:h=!1})=>{var[v,f]=l(!1),g=(s.length||0)>m,b=h?"mapFilter":"openFilterOptionsModal",_=h?"viewAll":null,S=`${o}_filter_modal`,y=r((()=>{f(!1)}),[]),F=r((e=>{d([...e])}),[d]),C=r((e=>{F(e),y()}),[F,y]),[x,T]=[s.slice(0,m),s.slice(m,s.length)],w=T.filter((e=>e.isSelected)),P=T.some((e=>!e.isSelected)),N="filterModal"===i(Ce),W=R(Wt,{filterName:o,singleSelect:e,onApply:F,values:x.concat(w),renderOption:u,disabled:p,inlineItems:N});return k(Nt,{name:o,title:a,tooltip:n,parentKey:t,children:[W,g&&P?R(wt,{disabled:p,trackingDetails:{clientContext:b,clientParameter:_},onClick:()=>{v||f(!0)},ariaAttributes:{"aria-controls":S},children:R(Pt,{})}):null,v&&s?R(Re,{values:s,singleSelect:e,popularChoiceDefinition:"multi",title:null!=a?a:"",name:o,onClose:y,onApply:C,renderOption:c||u,mapSurface:h}):null]})},Bt=({parentKey:e,title:t,tooltip:l,headerRightExtraContent:a,filterName:r,values:n,onClear:i,onApply:o,renderOption:s,modalRenderOption:d,singleSelect:u,viewMoreLimit:c=null,showModalLimit:m=null,disabled:p=!1,mapSurface:h=!1})=>{var[v,f]=bt(c,m);return(n||[]).length>f?R(Ot,{parentKey:e,filterName:r,title:t,tooltip:l,values:n,onClear:i,onApply:o,renderOption:s,modalRenderOption:d||s,viewMoreLimit:v,singleSelect:u,disabled:p,mapSurface:h}):R(Et,{parentKey:e,filterName:r,title:t,tooltip:l,headerRightExtraContent:a,values:n,onClear:i,onApply:o,renderOption:s,viewMoreLimit:v,singleSelect:u,disabled:p})},At=({object:e})=>{var t,l,a,r;if(e)switch(e.__typename){case"WebPresentation_LocationFilterValue":return(null==(t=e.location)||null==(l=t.names)?void 0:l.abbreviated)||null;case"WebPresentation_SimpleTextFilterValue":return e.localizedText;case"WebPresentation_TagFilterValue":return(null==(a=e.tag)?void 0:a.localizedName)||null;case"WebPresentation_TextFilterValue":return(null==(r=e.text)?void 0:r.text)||null;default:console.error("Unsupported type",e.__typename)}return null},Lt=({filterValue:e,validated:t=!1,filterName:l})=>{var a,r,n,i,o,{localize:d}=g(),{object:u}=e,c=null,[m,h]=le();if(s(h,[h]),u){switch(u.__typename){case"WebPresentation_BubbleRatingFilterValue":u.minimumRatingValue&&(c=u.minimumRatingValue<50?R(Q,{rating:u.minimumRatingValue/10,label:R(y,{elementType:"span",variant:"body-01",children:` ${d.string("ampersand_up")}`})}):R(ee,{rating:u.minimumRatingValue/10}));break;case"WebPresentation_LocationFilterValue":c=null==(a=u.location)||null==(r=a.names)?void 0:r.abbreviated;break;case"WebPresentation_SimpleTextFilterValue":m&&((null==l?void 0:l.toLowerCase())==="category".toLowerCase()||(null==l?void 0:l.toLowerCase())==="type".toLowerCase())&&e.value&&u.localizedText&&(o=te(e.value)),c=o||u.localizedText;break;case"WebPresentation_TagFilterValue":c=null==(n=u.tag)?void 0:n.localizedName;break;case"WebPresentation_TextFilterValue":c=null==(i=u.text)?void 0:i.text;break;default:console.error("Unsupported type",u.__typename)}t&&null===c&&e.value&&(c=e.value)}return null===c&&(c=R(p,{message:`Empty filterValue ${e.value}`})),c},Mt=({model:e,clientContext:t,clientParameter:l})=>{var{trackClick:a}=S({clientContext:t,clientParameter:l});return null!=e?R("span",{className:"eqOlB",children:R(ie,{model:e,onShowTooltip:a})}):null},Vt=({model:e})=>R(Mt,{model:e,clientContext:"showFilterTooltip"}),Gt=({model:e,value:t})=>R(Mt,{model:e,clientContext:"showFilterValueTooltip",clientParameter:JSON.stringify({value:t})}),It=(e,t)=>(null==t?void 0:t.filter(Boolean).map((t=>({name:_t(t,e),value:t.value,selected:t.isSelected}))))||[],Dt=({name:e,value:t})=>`${e}-${t}`,zt=({model:e,onFilterChange:t,onSetFilter:l,onClear:n,viewMoreLimit:o=null,disabled:s=!1,mapSurface:d=!1,headerRightExtraContent:u=null})=>{var c="leftRail"===i(Ce),[m,p]=bt(o),{title:h,name:v,values:f,tooltip:g}=e,b=r((e=>{l?l(gt(It(v,f),e).filter((e=>e.selected)).map((e=>e.value))):t&&t(((e,t)=>{var l=new Map;e.forEach((e=>l.set(Dt(e),e.selected)));var a=new Map;t.forEach((e=>{var t=Dt(e);l.has(t)||a.set(t,e.selected),l.get(t)!==e.selected&&a.set(t,e.selected)}));var r=new Map;return Array.from(a.entries()).forEach((([e,t])=>{var l,[a,n]=e.split("-");r.has(a)||r.set(a,[]),null==(l=r.get(a))||l.push({value:n,selected:t})})),[...r.entries()].map((([e,t])=>({id:e,selected:t.filter((({selected:e})=>e)).map((({value:e})=>e)),deselected:t.filter((({selected:e})=>!e)).map((({value:e})=>e))})))})(It(v,f),e))}),[l,t,f,v]),_=r((e=>function(t,l){var a,r=c?ge:be,n=s||!t.isSelected&&0===t.count,i=null!==t.tooltip?R(Gt,{model:t.tooltip,value:t.value}):null;return k(w,{children:[k(r,{id:`${e}_${v}_${t.value}`,typename:null==(a=t.object)?void 0:a.__typename,selected:t.isSelected,disabled:n,onSelect:l,value:t.value,children:[R(Ne,{filterValue:t,validated:!0,filterName:v}),c&&i]}),!c&&R("div",{className:"dvnOe",children:i})]})}),[c,v,s]),S=a((()=>_("main")),[_]),y=a((()=>_("modal")),[_]);if(!f)return null;var F=(f||[]).filter(Boolean);return 0===F.length?null:R(Pe,{title:h,tooltip:R(We,{model:g}),filterName:v,values:F,onApply:b,onClear:n,viewMoreLimit:m,showModalLimit:p,renderOption:S,modalRenderOption:y,singleSelect:!1,disabled:s,mapSurface:d,headerRightExtraContent:u})},$t=({model:e,setFilter:t,disabled:l=!1,mapSurface:a=!1,headerRightExtraContent:n=null})=>{var{values:i}=e,o=r((e=>{t&&t([...e])}),[t]),s=r((()=>{t&&t([])}),[t]);return e.__typename?i&&R(Ee,{disabled:l,model:e,onSetFilter:o,onClear:s,mapSurface:a,headerRightExtraContent:n}):R(p,{message:"empty model in MultiSelectFilterWrapper"})},Kt=({model:e,setFilter:t})=>{var l,a,{name:n,selectedRangeStart:i,selectedRangeEnd:o,buckets:s,title:d,tooltip:u}=e,c=(null==s?void 0:s.length)||0,{desktop:p}=m(),h=r(((e,l)=>{t&&t([e.toString(),l.toString()])}),[t]);return R(Se,{headerText:d,tooltip:R(We,{model:u}),name:n,isCollapsible:p,children:R(oe,{min:(null==s||null==(l=s[0])?void 0:l.rangeStart)||0,minHandleData:{currentValue:i||0,valueDescription:""},max:(null==s||null==(a=s[c-1])?void 0:a.rangeEnd)||0,maxHandleData:{currentValue:o||0,valueDescription:""},currentRangeLabel:null,step:1,onChange:h})})},Ut=({minPrice:e,maxPrice:t,selectedMin:l,selectedMax:a,onChange:r,onRelease:n,disabled:i=!1})=>{var{localize:o}=g(),s=b(),d=s.formatCurrencyInteger(l),u=a>=t?o.string("price_slider_plus_short",{0:s.formatCurrencyInteger(t)}):s.formatCurrencyInteger(a);return R("div",{className:"SRVEt w",children:R(oe,{disabled:i,min:e,minHandleData:{currentValue:l,valueDescription:o.string("sng_a11y_min_price")},max:t,maxHandleData:{currentValue:a,valueDescription:o.string("sng_a11y_max_price")},currentRangeLabel:`${d} - ${u}`,step:5,onChange:r,onRelease:n})})},jt=[],Ht=({model:e,setFilter:t,disabled:n=!1})=>{var i,o,d,{name:u,minValue:c,maxValue:p,selectedRangeStart:h,selectedRangeEnd:v,title:g,modes:b,tooltip:_}=e,{trackClick:y}=S(),[{min:F,max:C},x]=l({min:h,max:v}),T=(null==b?void 0:b.filter(Boolean))||jt,w=null==T||null==(i=T.filter((({isSelected:e})=>e)))||null==(o=i[0])?void 0:o.value,P=null==T||null==(d=T[0])?void 0:d.value,[N,W]=l(w),{page:E}=ce(),O=a((()=>/(hotel|lastminute|showuserreviews|smartdeals)/i.test(E)),[E]),{desktop:B}=m(),A=r(((e,t)=>{t-e>=5&&x({min:e,max:t})}),[]),L=r(((e,l,a)=>{if(t){var r=null!=a&&a!==P,n=e!==c||l!==p;if(n||r)if(!n&&r)t([a].filter(Boolean));else{var i=O?"-1":null;t([null==e?void 0:e.toString(),l!==p?null==l?void 0:l.toString():i,r?a:null].filter(Boolean))}else t([])}}),[t,c,p,P,O]),M=r((()=>{null!=F&&null!=C&&L(F,C,N)}),[L,F,C,N]),V=r((e=>{N!==e&&(W(e),L(null,null,e))}),[L,N]),G=r((()=>{y({clientContext:"openPricingModeModal"})}),[y]),I=r((()=>{y({clientContext:"openPricingModeTooltip"})}),[y]);s((()=>{x({min:h,max:v})}),[h,v]),s((()=>{W(w)}),[w]);var D=a((()=>T.map((e=>({value:e.value,displayName:At(e)||""})))||[]),[T]),z=a((()=>T.map((e=>{var{tooltip:t}=e;if(null==t)return null;var l=At(e);return null==l?null:{label:l,text:R(de,{model:t.popUpText})}})).filter(Boolean)),[T]);return k(Se,{headerText:g,name:u,tooltip:R(We,{model:_}),isCollapsible:B,children:[R(Ae,{minPrice:c||0,maxPrice:p||0,selectedMin:F||0,selectedMax:-1===C?p||0:C||0,onChange:A,onRelease:M,disabled:n}),D.length>0&&k("div",{className:"WFTKh A u",children:[R(se,{options:D,value:null!=N?N:P,onChange:V,label:R(f,{id:"hotels_filter_title_pricing_mode"}),onOpen:G,fullscreenMobile:!0,"aria-describedby":"priceModeTooltip",disabled:n}),z.length>0?R(ue,{content:z,onOpen:I}):null]})]})},qt=({id:e,value:t,children:l,selected:a,disabled:r,onSelect:n})=>R(x,{id:e,value:t,selected:a,disabled:r,onSelect:()=>{n(!a)},label:l,variant:"trail"}),Yt=({selected:e,onSelect:t,children:l,disabled:a=!1})=>R(O,{disabled:a,variant:"primary",onClick:()=>{e||t(!0)},children:R("div",{className:"UCILX f u G",children:R(y,{variant:e?"button-01":"body-01",children:l})})}),Xt=({children:e,isSelected:t,onClick:l,href:a,disabled:r=!1,allowDeselect:n=!1,hidden:i=!1})=>{var o=R(y,{variant:t?"title-05":"body-01",children:e}),s=n?"a":"span";return R("div",{className:F("XDHza P0 f u G",{hGtqO:r,BGthS:i}),children:t?R(s,{href:n?a:void 0,onClick:l,className:F({Dgygn:t,_S:n}),children:o}):R("a",{className:"KoOWI",onClick:l,href:a,children:o})})},Jt=({model:e},t=!1,l=!1,a=!1)=>{var{isLeftRail:r,name:n,variant:i}=e;return function(e,o){var s;if("text"===i&&r)return R(Ge,{allowDeselect:l,disabled:a,isSelected:e.isSelected,onClick:()=>{e.isSelected&&!l||o(!e.isSelected)},children:R(Ne,{filterValue:e,validated:!0})});var d=Me;return"checkbox"===i&&(d=ge),"text"===i&&(d=t?be:Ve),r||(d=be),R(d,{id:`${n}_${e.value}`,typename:null==(s=e.object)?void 0:s.__typename,value:e.value,selected:e.isSelected,disabled:a||!e.isSelected&&0===e.count,onSelect:e=>{(e||l)&&o(e)},children:R(Ne,{filterValue:e,validated:!0})})}},Zt=({name:e,title:t,tooltip:l,values:a,variant:n="checkbox",onSelection:o,onClear:s,viewMoreLimit:d=null,viewModalLimit:u=null,allowDeselect:c=!1,limitToSelectedValue:p=!0,disabled:h=!1,mapSurface:v=!1})=>{var{desktop:f}=m(),g="leftRail"===i(Ce),b=`filter-singleSelect-${e}`,[_,S]=bt(d,u),y=r((e=>{var t=e.find((e=>e.selected));null!=t&&t.selected?o(t.value):p||"checkbox"===n||c?o(null):console.error("Unsetting a single select should not happen")}),[o,p,n,c]);if(null==a)return null;var F=a.filter(Boolean);if(p){var C=F.find((e=>!0===e.isSelected));null!=C&&(F=[C])}if(0===F.length)return null;var x={model:{variant:n,title:t,name:e,onSelection:o,isDesktop:f,isLeftRail:g,ariaLabelledBy:b}},k=Jt(x,!1,c||"checkbox"===n,h),w=Jt(x,!0,c||"checkbox"===n,h),P=R(Pe,{parentKey:b,title:t,tooltip:l,filterName:e,values:F,viewMoreLimit:_,showModalLimit:S,renderOption:k,modalRenderOption:w,onApply:y,onClear:s,disabled:h,singleSelect:!0,mapSurface:v});return P&&"radio"===n?R(T,{name:e,children:P}):P},Qt=({onSelection:e,fixedUpValues:t,getHref:l,disabled:a=!1,hideAfter:r=-1,name:n})=>{var i=t.map(((t,i)=>R(Ge,{isSelected:t.isSelected,href:l(t),onClick:l=>{t.isSelected||e(t.value),l.stopPropagation(),l.preventDefault()},disabled:a,hidden:r>0&&i>=r&&!t.isSelected,children:R(Ne,{filterValue:t,filterName:n})},t.value)));return R("div",{children:i})},el=e=>{switch(e){case"category":return 4;case"navbar":return 20;default:return 6}},tl=({title:e,tooltip:t,name:a,values:n,onSelection:i,viewMoreLimit:o=6,disabled:d=!1})=>{var u=(n||[]).filter(Boolean),{page:m,params:p}=ce(),h="AttractionProductsFusion"===m?p.filters:null,[v]=ae(),f=q(),g=f||u.map((e=>!0===e.isSelected)).lastIndexOf(!0)>o-1,[b,_]=l(v?f:g),{trackClick:y}=S({clientContext:b?"showLessFilterOptions":"showMoreFilterOptions"}),F=f&&u.length>o,C=-1;F&&!b&&(C=o),s((()=>{v&&_(!1)}),[null==h?void 0:h.length,v]);var x=`filter-${a}`,T=F?R(Tt,{expanded:b,disabled:d,ariaContentId:x,onClick:()=>{y(),_(!b)}}):null,w=r((e=>{var t;if(e.link){var{url:l}=me(e.link);t=l}return t||`#${a}=${e.value}`}),[a]);return R(Se,{name:a,isCollapsible:!1,headerText:e,tooltip:t,children:R("div",{id:x,children:k(c,{variant:"stack",gap:"standard",children:[R(De,{disabled:d,fixedUpValues:u,hideAfter:C,onSelection:e=>{v?(i(e),_(!1)):i(e)},getHref:w,name:a}),T&&R("div",{children:T})]})})})},ll=({title:e,name:t,tooltip:l,values:a,onSelection:r,onClear:n,viewMoreLimit:i,disabled:o=!1,mapSurface:s=!1})=>R(Ie,{title:e,tooltip:l,name:t,values:a,limitToSelectedValue:!1,viewMoreLimit:i,onSelection:r,allowDeselect:!1,onClear:n,disabled:o,mapSurface:s}),al=({title:e,tooltip:t,name:l,values:a,onSelection:r,onClear:n,disabled:o=!1,mapSurface:d=!1})=>{var u,c="leftRail"===i(Ce),[m,p]=ae();if(s(p,[p]),0===a.filter(Boolean).length)return null;var h=a;if(m){var v=a.filter(Boolean).find((e=>e.isSelected));v&&(u=a.filter(Boolean).filter((e=>!e.isSelected)),h=[v,...u])}return c?R(tl,{title:e,tooltip:t,name:l,values:h,variant:"text",onSelection:r,onClear:n,viewMoreLimit:6,disabled:o}):R(ll,{title:e,tooltip:t,name:l,values:h,variant:"text",onSelection:r,onClear:n,viewMoreLimit:el(l),disabled:o,mapSurface:d})},rl=[],nl=({model:e,setFilter:t,disabled:l=!1,mapSurface:a=!1,contentType:n})=>{var{title:i,name:o,values:s,tooltip:d}=e,u=r((()=>{t&&t([])}),[t]),c=r((e=>{t&&t(null!=e?[e]:[])}),[t]),m=R(We,{model:d});return"rating"===e.name?R(Ie,{title:i||"",tooltip:m,name:o,values:s||rl,onSelection:c,onClear:u,viewMoreLimit:5,limitToSelectedValue:!1,disabled:l,allowDeselect:!0,mapSurface:a}):((e,t)=>(t===A||t===L)&&e===M)(e.name,n)?R(ze,{title:i||"",tooltip:m,name:o,values:s||rl,onSelection:c,onClear:u,disabled:l,mapSurface:a}):R(Ie,{title:i||"",tooltip:m,name:o,values:s||rl,onSelection:c,onClear:u,disabled:l,limitToSelectedValue:!1,allowDeselect:!0,mapSurface:a})},il=({model:e,onChange:t,disabled:l=!1})=>{var{values:a}=e,n=r((e=>{t&&t(e)}),[t]),i=r((()=>{if(t){var e=new Map;null==a||a.filter(Boolean).forEach((({filterName:t,value:l,isSelected:a})=>{var r;a&&(e.has(t)||e.set(t,[]),null==(r=e.get(t))||r.push(l))}));var l=[];Array.from(e.entries()).forEach((([e,t])=>null!=e&&l.push({id:e,deselected:t}))),t(l)}}),[t,a]);return e.__typename?a&&R(Ee,{disabled:l,model:e,onFilterChange:n,onClear:i}):R(p,{message:"empty model in ReferenceFilterWrapper"})},ol=({model:e,setFilter:t,disabled:l=!1})=>k(w,{children:[R(O,{disabled:l,onClick:()=>{null!=t&&t([null==e.value?at:e.value])},children:e.title}),R(We,{model:e.tooltip})]}),sl=()=>{},dl=[],ul=({model:e,setFilter:t,disabled:a=!1})=>{var{name:n,title:i,locations:o,minDistance:d,maxDistance:u,selectedDistance:m,unitFormat:p,tooltip:h}=e,v=null!=d?d:0,f=null!=u?u:0,{localize:b}=g(),_=r((({max:e})=>{var t;return(null==p||null==(t=p.text)?void 0:t.replace("{0}",`${Math.min(null!=e?e:f,f)}`))||""}),[p,f]),S=r((()=>{t&&t([])}),[t]),y=r(((e,l)=>{null!=t&&null!=e&&null!=l&&t([e,`${l}`])}),[t]),F=null!=m?m:f,[C,x]=l(F),T=r(((e,t)=>{t>=1&&x(t)}),[]),w=null==o?void 0:o.filter(Boolean).filter((({isSelected:e})=>e)).map((({value:e})=>e))[0],[P,N]=l(w),W=r((()=>y(P,C)),[y,P,C]),E=r((e=>{null===e?S():(N(e),y(e,C))}),[y,C,S]);return s((()=>{N(w)}),[w]),s((()=>{x(F)}),[F]),R(Se,{name:n,headerText:i,tooltip:R(We,{model:h}),isCollapsible:!0,children:k(c,{gap:"gapless",children:[R(oe,{disabled:a,min:v,max:f,maxHandleData:{currentValue:null!=C?C:f,valueDescription:b.string("sng_a11y_max_distance")},currentRangeLabel:_({max:C}),step:1,onChange:T,onRelease:W}),R(Ie,{disabled:a,title:null,tooltip:null,name:n,values:o||dl,variant:"text",onSelection:E,onClear:sl,limitToSelectedValue:!1,viewModalLimit:8,allowDeselect:!0})]})})},cl=({model:e,setFilter:t,disabled:l=!1})=>{var{name:a,title:n,values:i,tooltip:o}=e,s=r((()=>{t&&t([])}),[t]),d=r((e=>{t&&t(null!=e?[e]:[])}),[t]);return R(ze,{title:n||"",tooltip:R(We,{model:o}),name:a,values:i||[],onSelection:d,onClear:s,disabled:l})},ml=({model:e,onChange:t,setFilter:l,disabled:a=!1,mapSurface:r=!1,contentType:n,headerRightExtraContent:i})=>{switch(e.__typename){case"WebPresentation_WebNavigationLinkFilter":return R(He,{disabled:a,model:e,setFilter:l});case"WebPresentation_EnumeratedValueFilter":return R($e,{disabled:a,model:e,setFilter:l,mapSurface:r,contentType:n});case"WebPresentation_MultiValueFilter":return R(Oe,{disabled:a,model:e,setFilter:l,mapSurface:r,headerRightExtraContent:i});case"WebPresentation_RangedValueFilter":return R(Be,{disabled:a,model:e,setFilter:l});case"WebPresentation_RangedSliderFilter":return R(Le,{disabled:a,model:e,setFilter:l});case"WebPresentation_DistanceFromFilter":return R(je,{disabled:a,model:e,setFilter:l});case"WebPresentation_SingleButtonFilter":return R(Ue,{disabled:a,model:e,setFilter:l});case"WebPresentation_ReferenceFilter":return R(Ke,{disabled:a,model:e,onChange:t});default:return R(v,{typename:e.__typename})}},pl=({model:e,header:t,onChange:l,disabled:r=!1,mapSurface:n=!1,contentType:i})=>{var{trackClick:o}=S(),[d,u]=re(),m=e.filter(Boolean).some((e=>"healthSafety"===e.name));s((()=>{m&&u()}),[m,u]);var p=e=>{l&&l(e)},h=a((()=>d?e.filter(Boolean).filter((e=>"healthSafety"!==e.name)):e.filter(Boolean)),[e,d]);return h&&h.length>0?k(c,{variant:"stack",gap:"wide",children:[t,h.map((e=>{return R("div",{className:"_T _R",children:R(ml,{disabled:r,onChange:p,setFilter:(t=e.name,l=e.trackingKey,a=e.trackingTitle,e=>{if(n){var r={clientContext:rt.mapFilter.clientContext,clientParameter:null!=e&&e.length>0?rt.mapFilterFilterSelect.clientParameter:rt.mapFilterFilterDeselect.clientParameter,trackingKey:l,trackingTitle:a};o(r)}p([{id:t,value:e}])}),model:e,mapSurface:n,contentType:i,headerRightExtraContent:null})},{name:"",...e}.name);var t,l,a})),0===h.length&&R(f,{id:"fusion_list_page_filter_no_filters"})]}):null},hl=e=>{var t=0;return e.filter(Boolean).forEach((e=>{switch(e.__typename){case"WebPresentation_EnumeratedValueFilter":case"WebPresentation_MultiValueFilter":e.values&&(t+=e.values.map((e=>e&&e.isSelected?1:0)).reduce(((e,t)=>e+t),0));break;case"WebPresentation_RangedValueFilter":null===e.selectedRangeStart&&null===e.selectedRangeEnd||t++}})),t},vl=(e,t)=>[...new Set([...e||[],...t||[]])],fl=(e,t)=>e.filter((e=>!(null!=t&&t.includes(e)))),gl=e=>"WebPresentation_WebNavigationFilterGroup"===e.__typename?1:0,bl=e=>hl([...(e||[]).filter(Boolean)])>0;function _l(e,t,l=!1){return!!t&&(!l||e!==A&&e!==L?t.filter(Boolean).length>0:t.filter(Boolean).filter((e=>null!=e.id&&!Ye.has(e.id))).length>0)}var Sl=e=>[...e||[]].filter(Boolean).map((({id:e,value:t})=>{if(null==e||null==t)return null;var l=[...t].filter(Boolean);return 0===l.length?null:{id:e,value:Xe.has(e)?l:l.sort()}})).filter(Boolean).sort(((e,t)=>(e.id||"")>(t.id||"")?1:-1)),yl=e=>{var t;if(e)switch(e.__typename){case"WebPresentation_RangedSliderFilter":return(e=>{var t,l,a,r,n=null==(t=e.modes)||null==(l=t.filter((e=>null==e?void 0:e.isSelected))[0])?void 0:l.value,i=null!=n&&!(null!=(a=e.modes)&&null!=(r=a[0])&&r.isSelected),o=null!==e.selectedRangeStart&&null!==e.selectedRangeEnd&&(e.selectedRangeStart!==e.minValue||e.selectedRangeEnd!==e.maxValue);return o||i?!o&&i&&null!=n?{id:e.name,value:[n]}:o&&!i?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd)]}:o&&i&&null!=n?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd),n]}:null:null})(e);case"WebPresentation_RangedValueFilter":return null!=e.selectedRangeStart&&null!=e.selectedRangeEnd?{id:e.name,value:[String(e.selectedRangeStart),String(e.selectedRangeEnd)]}:null;case"WebPresentation_MultiValueFilter":case"WebPresentation_EnumeratedValueFilter":case"WebPresentation_WebNavigationLinkFilter":return(t={id:e.name,value:(e.values||[]).filter(Boolean).filter((e=>e.value&&e.isSelected)).map((e=>e.value)).filter(Boolean).reduce(((e,t)=>[...e,t]),[])})&&t.value.length>0?t:null;default:return null}return null},Fl=e=>e.flatMap((e=>(e=>{switch(e.__typename){case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return e.filters||[];case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return e.filter?[e.filter]:[];default:return e.__typename,[]}})(e).map(yl).filter(Boolean))),Cl=(e,t,l,a=!1)=>{var r=Fl(t);e.filter((e=>!r.filter((t=>{return a=e,(l=t).id===a.id&&l.value.length===a.value.length&&l.value.every((e=>a.value.includes(e)));var l,a})).length)).forEach((e=>{t.forEach((t=>{var r,n=null==(r=(e=>{switch(e.__typename){case"WebPresentation_WebNavigationFilterGroup":case"WebPresentation_SingleSelectFilterGroup":return[e.filter];default:return e.filters}})(t))?void 0:r.filter((t=>(null==t?void 0:t.name)===e.id));null==n||n.forEach((t=>l({trackingKey:null==t?void 0:t.trackingKey,trackingTitle:null==t?void 0:t.trackingTitle,clientContext:a?"mapFilterApply":"setFilter",clientParameter:JSON.stringify(e.value)})))}))}))},xl=e=>e&&null!=e.id&&""!==e.id?{id:e.id,value:(e.value||[]).filter(Boolean)}:null,Tl=(e,t)=>{return[...new Map((l=[...e,...t],l.filter(Boolean).map(xl).filter(Boolean)).map((e=>[e.id,e]))).values()].filter((({value:e})=>null!=e&&0!==e.length&&e[0]!==at));var l},Rl=(e,t)=>a((()=>((e,t)=>e.map((e=>{if("WebPresentation_SingleSelectFilterGroup"===e.__typename||"WebPresentation_WebNavigationFilterGroup"===e.__typename)return e.filter&&pe(e.filter.surfaces,t)?e:null;var l=((e,t)=>(e||[]).filter(Boolean).filter((e=>pe(e.surfaces,t))))(e.filters,t);return 0!==l.length?{...e,filters:l}:null})).filter(Boolean))((e||[]).filter(Boolean),t)),[e,t]),kl=e=>{switch(e.__typename){case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return e.filters||[];case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return[e.filter].filter(Boolean);default:return console.error("Unknown filter group type",e.__typename),[]}},wl=(e,t)=>{var l=new Map;return e.forEach((e=>l.set(e.id,e))),t.forEach((e=>{var t=l.has(e.id)?l.get(e.id):{id:e.id,value:e.value},a=((e,t,l,a)=>{var r=new Set(t||e||[]);return null==l||l.forEach((e=>r.add(e))),null==a||a.forEach((e=>r.delete(e))),Array.from(r.keys())})(null==t?void 0:t.value,e.value,e.selected,e.deselected);l.set(e.id,{id:e.id,value:a})})),Array.from(l.entries()).map((([,e])=>e))},Pl=[],Nl=(e,t,l)=>{var a=null!=t?wl([],t):null;if(a&&"HotelsFusion"!==l){if(e){var r,n;switch(e.__typename){case"WebPresentation_StandardFilterGroup":n=fe.fromFilterInputSet(a,"merge").mergeStandardFilterGroup(e);break;case"WebPresentation_StandardFilterGroupWebOnly":n=fe.fromFilterInputSet(a,"merge").mergeStandardFilterGroupWebOnly(e);break;default:console.error("[Fusion] unknown filter group type",e.__typename)}if(null!=(r=n)&&r.filters)return n.filters}}else if(null!=e&&e.filters)return e.filters;return Pl},Wl=({filterGroup:e,onApply:t,disabled:l,webVariant:n,contentType:i})=>{var o=r((e=>{l||t(e)}),[t,l]),s=a((()=>Nl(e,[],n)),[e,n]);return R(qe,{model:s,onChange:o,disabled:l,contentType:i})},El=({filterGroup:e,onApply:t,disabled:l,contentType:n})=>{var i=r((e=>{e&&!l&&t(wl([],e))}),[t,l]),o=a((()=>kl(e)),[e]);return R(qe,{disabled:l,model:o,onChange:i,contentType:n},`filter-group-${null===e.name?"no-name":e.name}`)},Ol=({filterGroups:e,onUpdate:t,disabled:l=!1,webVariant:n,contentType:i})=>{var o=a((()=>Fl(e)),[e]),s=r((e=>{t(wl(o,e))}),[t,o]);if(0===e.length)return null;var d=[...e];return d.sort(((e,t)=>gl(t)-gl(e))),R("div",{style:{userSelect:"none"},children:R(Ce.Provider,{value:"leftRail",children:R(c,{variant:"stack",gap:"wide",children:d.filter(Boolean).map(((e,t)=>{var a=null!=e.name?e.name:`${e.__typename}-${t}`;switch(e.__typename){case"WebPresentation_SingleSelectFilterGroup":case"WebPresentation_WebNavigationFilterGroup":return R(Ze,{disabled:l,filterGroup:e,onApply:s,contentType:i},a);case"WebPresentation_StandardFilterGroup":case"WebPresentation_StandardFilterGroupWebOnly":return R(Je,{disabled:l,filterGroup:e,onApply:s,webVariant:n,contentType:i},a);default:return R(v,{typename:e.__typename},a)}}))})})})},Bl="f e z",Al=({title:e,children:t,isOpen:l=!1,slideIn:a=!0,onClose:r,onApply:n,onReset:i,resetButtonText:o,narrowModal:s=!1})=>{if(!l)return null;var d=k(W,{variant:"primary",size:"small",onClick:n,children:[R(f,{id:"sng_fusion_list_filters_modal_apply"})," "]}),u=null!=i?R(O,{onClick:i,children:null!=o?o:R(f,{id:"sng_fusion_list_filters_modal_reset"})}):void 0;return a?R(Y,{header:e,slideFrom:"bottom",heightOption:"full",widthOption:"full",onClose:r,primaryButton:d,secondaryButton:u,children:R("div",{className:Bl,children:R("div",{className:"F1",children:t})})}):R(X,{variant:"fixed-height-sticky-footer",buttonsAlignment:"space-between",title:e,widthOption:s?"fixed-40":"fixed-60",heightOption:"fixed-80",onClose:r,primaryButton:d,secondaryButton:u,children:R("div",{className:Bl,children:R("div",{className:"F1",children:t})})})},Ll=()=>{},Ml=({filterGroup:e,onApply:t=Ll,onReset:n=Ll,webVariant:i,mapSurface:o=!1,contentType:s,disabled:d=!1})=>{var[c,p]=l(!1),[h,v]=l(null),{trackClick:b}=S(),{localize:y}=g(),F=ne(),C=r((()=>{p(!1),v(null)}),[p]),x=r((e=>{v((t=>{return l=t||[],a=e,r=[...l,...a],n=new Map,r.forEach((e=>{var t,l,a=n.get(e.id);n.set(e.id,null!=a?(l=e,{id:(t=a).id,selected:fl(vl(t.selected,l.selected),l.deselected),deselected:fl(vl(t.deselected,l.deselected),l.selected),value:null!=l.value?l.value:t.value}):e)})),Array.from(n.entries()).map((([,e])=>e));var l,a,r,n}))}),[]),T=r((()=>{h&&t(wl([],h)),v(null),p(!1)}),[h,t]),w=r((()=>{var t=o?rt.mapFilterEnterClick.clientContext:"openFilterPill",l=o?rt.mapFilterEnterClick.clientParameter:e.name;b({clientContext:t,clientParameter:l}),p(!0)}),[e.name,b,o]),P=r((()=>{v(null),n(),p(!1)}),[p,v,n]),W=F?R(f,{id:"fusion_attraction_list_tour_product_link_text"}):null,E=a((()=>Nl(e,h,i)),[e,h,i]),{tabletOrSmaller:O}=m(),A=(e=>R(f,e===B?{id:"mobile_attraction_categories_filter"}:{id:"ta_filters"}))(e.groupType),L=null!==e.name?e.name:y.string("fusion_filters_title");null===e.name&&JSON.stringify(e.__typename);var M,V=e.filters?(M=e.filters,hl([...M])):0,G=0===V?L:R(_,{id:"filter.chip.name.count",args:{text:L,count:V}});return k(u,{children:[R(N,{disabled:d,"aria-label":e.groupType,selected:bl(e.filters),onClick:w,margin:"spacing-01",children:G}),R(Ce.Provider,{value:"filterModal",children:R(Qe,{isOpen:c,title:A,onClose:C,onApply:T,onReset:P,resetButtonText:W,slideIn:O,narrowModal:!0,children:R(qe,{model:E,onChange:x,mapSurface:o,contentType:s},`filter-group-${null===e.name?"no-name":e.name}`)})})]},e.name)},Vl=()=>{},Gl=({filterGroup:e,onApply:t=Vl,mapSurface:a=!1,contentType:n,disabled:i=!1})=>{var o,[s,d]=l(!1),{trackClick:c}=S(),p=r((()=>{var t=a?rt.mapCardCategoryClick.clientContext:"openFilterPill",l=a?rt.mapCardCategoryClick.clientParameter:e.name;c({clientContext:t,clientParameter:l}),d(!0)}),[c,e.name,a]),h=r((()=>{d(!1)}),[d]),v=r((e=>{e&&t(wl([],e)),d(!1)}),[t]),{tabletOrSmaller:f}=m(),g=kl(e);if(s){var b=R(Ce.Provider,{value:"filterModal",children:R(qe,{model:g,onChange:v,mapSurface:a,contentType:n},`filter-group-${null===e.name?"no-name":e.name}`)});o=f?R(Y,{heightOption:"full",widthOption:"full",slideFrom:"bottom",onClose:h,children:b}):R(X,{variant:"fixed-height-sticky-footer",widthOption:"fixed-40",heightOption:"restricted",onClose:h,children:b})}return k(u,{children:[R(N,{disabled:i,"aria-label":e.groupType,selected:bl(g),onClick:p,margin:"spacing-01",icon:s?z:D,iconPosition:"trailing",children:e.name}),o]},e.name)},Il=()=>{},Dl=({filterGroup:e,onApply:t=Il,onReset:l=Il,webVariant:a,mapSurface:r=!1,contentType:n,disabled:i=!1})=>{var{trackClick:o}=S();switch(e.__typename){case"WebPresentation_WebNavigationFilterGroup":case"WebPresentation_SingleSelectFilterGroup":return R(tt,{filterGroup:e,onApply:e=>{o({clientContext:"setFilters",clientParameter:JSON.stringify(e)}),t(e)},onReset:l,mapSurface:r,contentType:n,disabled:i});case"WebPresentation_StandardFilterGroup":return R(et,{filterGroup:e,onApply:t,onReset:l,webVariant:a,mapSurface:r,contentType:n,disabled:i});case"WebPresentation_StandardFilterGroupWebOnly":return null;default:return R(v,{typename:e.__typename})}},zl=({filterGroups:e,onReset:t=Il,onApply:l=Il,mapSurface:a=!1,contentType:r,disabled:n=!1})=>{var i=Fl(e),o=e=>{l(wl(i,e))};return R("div",{className:"_W v u G",children:e.map((e=>R(u,{children:R(Dl,{filterGroup:e,onReset:t,onApply:o,mapSurface:a,contentType:r,disabled:n})},e.name)))})},$l=({filterGroups:e,onUpdate:t,contentType:l})=>{if(0===e.length)return null;var a=e.filter((e=>"WebPresentation_StandardFilterGroupWebOnly"===e.__typename)),r=Fl(a),n=e=>{t(wl(r,e))},i=[...a];return i.sort(((e,t)=>gl(t)-gl(e))),R(w,{children:i.map((e=>R(qe,{model:kl(e),onChange:n,contentType:l},`filter-group-${null==e.name?"no-name":e.name}`)))})};return e("hasFilters",_l),[()=>{ge=nt,be=it,_e=mt,Se=ft,ye=[4,15],Fe=[4,4],Ce=n("default"),xe=`.${St.searchable.replace(/\s+/g,".")}`,Te=new Set(["destinationGeo","type"]),Re=Ft,ke=4,we=4,Pe=Bt,Ne=Lt,We=Vt,Ee=zt,Oe=h($t),Be=h(Kt),Ae=Ut,Le=h(Ht),Me=qt,Ve=Yt,Ge=Xt,Ie=Zt,De=Qt,ze=al,$e=h(nl),Ke=h(il),Ue=h(ol),je=h(ul),He=h(cl),qe=pl,he=class extends Set{addValueAt(e,t){var l=[...this];l[e]=t,this.reset(l)}addAll(e){e.forEach((e=>this.add(e)))}reset(e){this.clear(),e&&this.addAll(e)}get hasAny(){return this.size>0}export(){return[...this]}},ve=class{constructor(e){this.filters=new Map,e&&this.addInputs(e)}addInputs(e){e.filter(Boolean).forEach((e=>{this.addInput(e)}))}reset(e){this.filters.clear(),e&&this.addInputs(e)}addInput(e){var{id:t,value:l}=e;if(null!=t&&null!=l){var a=l.filter(Boolean);l.length!==a.length&&console.error("[Fusion] Input filter value contained nulls",t,l),this.getOrCreate(t).reset(a)}}getRange(e){var t=this.get(e);if(t&&t.size>=2){var[l,a]=[...t];if(null!=l&&null!=a){var r=Number(l),n=Number(a);if(!isNaN(r)&&!isNaN(n))return{rangeStart:r,rangeEnd:n};console.error("[Fusion] Range filter malformed, at least one part is NaN",e,l,a)}else console.error("[Fusion] Range filter malformed, at least one required part is null",e,l,a)}return null}getDistanceFrom(e){var t=this.get(e);if(t){var[l,a]=[...t];if(null!=l&&null!=a){var r=Number(a);if(!isNaN(r))return{distance:r,locationId:l};console.error("[Fusion] distance filter malformed",e,a)}}return null}getSelected(e,t){var l=this.get(e);return!!l&&l.has(t)}getOrCreate(e){var t=this.get(e);return t||(t=new he,this.filters.set(e,t)),t}get(e){return this.filters.get(e)||null}clearAll(){[...this.filters.values()].forEach((e=>e.clear()))}clear(e){this.getOrCreate(e).reset()}has(e){return this.filters.has(e)}hasAnyValues(e){var t=this.get(e);return!!t&&t.hasAny}get hasAny(){return this.filters.size>0}export(){return[...this.filters.entries()].map((([e,t])=>({id:e,value:t.export()})))}},e("RouteFilterMerger",fe=class e{constructor(e,t="overwrite"){this.routeFilters=void 0,this.mode=void 0,this.routeFilters=e,this.mode=t}get mergeMode(){return this.mode}reset(e){this.routeFilters=e||new ve([])}mergeModelFilters(e){return e?e.filter(Boolean).map((e=>this.mergeFilterGroup(e))):[]}mergeFilterGroupSelections(e){return this.mergeFilterGroup(e)}mergeFilterGroup(e){switch(e.__typename){case"WebPresentation_SingleSelectFilterGroup":return this.mergeSingleSelectFilterGroup(e);case"WebPresentation_StandardFilterGroup":return this.mergeStandardFilterGroup(e);case"WebPresentation_StandardFilterGroupWebOnly":return this.mergeStandardFilterGroupWebOnly(e);default:return console.error("[Fusion] unexpected filter group",e.__typename),e}}mergeFilters(e){return e?e.filter(Boolean).map((e=>this.mergeFilter(e))):e}mergeSingleSelectFilterGroup(e){return e.filter?{...e,filter:"navbar"!==e.filter.name?this.mergeEnumeratedValueFilter(e.filter):e.filter}:e}mergeStandardFilterGroup(e){return e.filters?{...e,filters:this.mergeFilters(e.filters.filter(Boolean))||null}:e}mergeStandardFilterGroupWebOnly(e){return e.filters?{...e,filters:this.mergeFilters(e.filters.filter(Boolean))||null}:e}mergeFilter(e){switch(e.__typename){case"WebPresentation_DistanceFromFilter":return this.mergeDistanceFromFilter(e);case"WebPresentation_EnumeratedValueFilter":return this.mergeEnumeratedValueFilter(e);case"WebPresentation_MultiValueFilter":return this.mergeMultiValueFilter(e);case"WebPresentation_RangedValueFilter":return console.error("[Fusion] WebPresentation_RangedValueFilter is deprecated"),e;case"WebPresentation_RangedSliderFilter":return this.mergeRangeSliderFilter(e);case"WebPresentation_ReferenceFilter":return this.mergeReferenceFilter(e);case"WebPresentation_SingleButtonFilter":return e;default:return console.error("[Fusion] unknown filter type",e.__typename),e}}mergeRangeSliderFilter(e){if(e.name){var t=this.routeFilters.getRange(e.name);if(t)return{...e,selectedRangeStart:t.rangeStart,selectedRangeEnd:t.rangeEnd}}return e}mergeDistanceFromFilter(e){if(e&&e.name&&e.locations){var t=this.routeFilters.getDistanceFrom(e.name);if(t){var{distance:l,locationId:a}=t;return{...e,selectedDistance:l,locations:(e.locations||[]).filter(Boolean).map((e=>({...e,isSelected:null!=e.value&&e.value===a})))}}}return e}isRouteValueSelected(e,t){return this.routeFilters.getOrCreate(e).has(t)}mergeSelectedState(e,t,l){var a=!1;switch(this.mode){case"blend":a=l||this.isRouteValueSelected(e,t);break;case"merge":a=this.routeFilters.has(e)?this.isRouteValueSelected(e,t):l;break;default:a=this.isRouteValueSelected(e,t)}return a}mergeMultiValueFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).map((t=>({...t,isSelected:this.mergeSelectedState(e.name,t.value,t.isSelected)})))}:e}mergeEnumeratedValueFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).map((t=>({...t,isSelected:this.mergeSelectedState(e.name,t.value,t.isSelected)})))}:e}mergeReferenceFilter(e){return e.name&&e.values?{...e,values:(e.values||[]).filter(Boolean).filter((e=>null!=e.filterName)).map((e=>({...e,isSelected:this.mergeSelectedState(e.filterName||"",e.value,e.isSelected)})))}:e}static fromFilterInputSet(t,l="overwrite"){return new e(new ve(t),l)}}),Ye=new Set([V,lt]),Xe=new Set(["price","distFrom"]),Je=Wl,Ze=El,Qe=Al,et=Ml,tt=Gl,e({CheckboxItem:ge,ChipItem:be,DesktopFiltersMemoized:d(Ol),FILTER_ATTRACTIONS_SUPPLIER_TOGGLE_ID:lt,FilterPillsMemoized:d(zl),FilterValueLabel:Ne,MAP_TRACKING_ACTIONS:rt,REMOVE_FLAG:at,RouteFilterMerger:fe,ShowAllOptionsModal:Re,TourOperatorsMemoized:d($l),applyFilterChangeList:wl,extractRouteFiltersFromFilterGroups:Fl,hasFilters:_l,sanitizeFilters:Sl,trackAppliedFilters:Cl,unionFilters:Tl,useFilterGroupsForSurface:Rl})},[e=>(l=e.useState,a=e.useMemo,r=e.useCallback,n=e.createContext,i=e.useContext,o=e.useRef,s=e.useEffect,d=e.memo,u=e.Fragment),e=>c=e.default,e=>(m=e.useViewportCategory,p=e.WPSUnexpected,h=e.fused,v=e.WPSUnsupportedType),e=>(f=e.default,g=e.useLocalize,b=e.useIntlFormatter,_=e.UnsafeLocalize),e=>S=e.useFusionTracking,e=>y=e.default,e=>F=e.default,e=>(C=e.Checkbox,x=e.RadioButton,T=e.RadioGroup),e=>(R=e.jsx,k=e.jsxs,w=e.Fragment),e=>(P=e.ChipInput,N=e.ChipButton),e=>(W=e.default,E=e.CircularButton,O=e.BorderlessButton),e=>(B=e.FILTER_ATTRACTIONS_L1_CATEGORY_ID,A=e.CONTENT_TYPE_ATTRACTION,L=e.CONTENT_TYPE_ATTRACTION_PRODUCT,M=e.FILTER_ATTRACTIONS_CATEGORY_ID,V=e.FILTER_ATTRACTIONS_ALL_ID),e=>G=e.default,e=>I=e.default,e=>D=e.default,e=>z=e.default,e=>$=e.HoverTooltip,e=>(K=e.KEY_UP,U=e.KEY_DOWN),e=>j=e.default,e=>(H=e.useClientSideLayoutEffect,q=e.useIsRobotSafe),e=>(Y=e.SlideInModal,X=e.Modal),e=>J=e.default,e=>Z=e.default,e=>(Q=e.BubbleRatingWithLabel,ee=e.BubbleRating),e=>te=e.getFiltersNewFRTranslation,e=>(le=e.useShowNewFRTranslations,ae=e.useTruncateL2Filter,re=e.useRemoveCovid19Filter,ne=e.useSemLanderTest),e=>ie=e.Tooltip,e=>oe=e.default,e=>se=e.DropdownMenu,e=>de=e.default,e=>ue=e.DropdownTooltip,e=>ce=e.useRoute,e=>(me=e.deriveLinkInfoFromInternalLink,pe=e.isRenderableSurface)]]},["1o4yt4","hk71c1","kgddhk","17thqz","1shtzu","1essqv","fkji80","frf6ac","121h32","1b1clj","jppfwt","5o1mel","1dtpps","1my7i5","1i0z8n","14ilds","1xm2jz","conwso","19b9b1","1mb2nz","1i3sz5","gppdva","17nq86","1bkeq2","1n51b2","2heyv0","7c3vnd","bljygq","1ntn26","1lg8go","ys735o","fgwvq1","3j2edp"]]);
