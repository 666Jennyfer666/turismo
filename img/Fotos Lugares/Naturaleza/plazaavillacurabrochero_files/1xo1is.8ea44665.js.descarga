(this.$WP=this.$WP||[]).push(["1xo1is",(e,r)=>{"use strict";var p,i,s,t,u,n,o,a,c,T,d,l,v,m,E,g,h="REGISTER_POPUP",P="DISMISS_POPUP",f="RESET",S=(e,r)=>(null==e?void 0:e.get(r))||[],y=(e,r)=>{var p;return!((e,r)=>S(e.popupTierDismissals,r).some((p=>!S(e.popupTierEvents,r).includes(p))))(e,r)||!(null==(p=e.popupSkipTiers)||!p.get(r))},k=(e,r)=>{switch(r){case 0:return k(e,50);case 50:return y(e,r)?k(e,100):50;case 100:return y(e,r)?k(e,200):100;case 200:return y(e,r)?k(e,300):200;case 300:return y(e,r)?k(e,400):300;case 400:return y(e,r)?k(e,500):400;case 500:return y(e,r)?k(e,600):500;case 600:return 600;default:return 0}},M=(e,r,p,i)=>{var s=e.popupNodes,t=e.popupTier,u=new Map(e.popupSkipTiers),n=new Map(e.popupTierDismissals),o=r.tier,a=n.get(o),c=p.filter((e=>!(null!=a&&a.includes(e))));return c.length>0&&(a&&a.length>0&&c.length>0?n.set(o,[...a,...c]):n.set(o,p)),i&&u.set(o,!0),e.popupNodes.some((e=>e.key===r.key))||(s=[...e.popupNodes,r],t=k({...e,popupTierDismissals:n,popupSkipTiers:u},0)),{...e,popupNodes:s,popupTierDismissals:n,popupTier:t,popupSkipTiers:u}},w=(e,r)=>{var p=new Map(e.popupTierEvents),i=[...p.get(e.popupTier)||[]];if(r.forEach((r=>{var p;!i.includes(r)&&null!=(p=e.popupNodes)&&p.some((p=>p.key===r&&p.tier===e.popupTier))&&(i=[...i,r])})),i.toString()!==(e.popupTierEvents.get(e.popupTier)||[]).toString()){var s,t,u={popupTierEvents:e.popupTierEvents,popupTier:e.popupTier};(null!=(s=e.popupSkipTiers)&&s.get(e.popupTier||0)||e.popupTierDismissals&&e.popupNodes.length>0&&void 0!==e.popupTier&&(i&&(null==(t=i)?void 0:t.length)>0||0===e.popupTier))&&(p.set(e.popupTier,i),u=(e=>{var r,p=r=>({...e,popupTier:r});if(Array.from(e.popupTierEvents.get(e.popupTier)||[]).sort().toString()===Array.from((null==(r=e.popupTierDismissals)?void 0:r.get(e.popupTier||0))||[]).sort().toString())switch(e.popupTier){case 0:return p(k(e,50));case 50:return p(k(e,100));case 100:return p(k(e,200));case 200:return p(k(e,300));case 300:return p(k(e,400));case 400:return p(k(e,500));case 500:return p(k(e,600));default:return e}return e})({...e,popupTierEvents:p}));var n=e.popupMaxTier;return e.popupMaxTier<u.popupTier&&(n=u.popupTier),{...e,popupTierEvents:p,popupMaxTier:n,popupTier:u.popupTier}}return e},x=()=>({popupNodes:[],popupTierDismissals:new Map,popupTierEvents:new Map,popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}),D=(e=x(),r)=>{switch(r.type){case h:return void 0!==r.element?M(e,r.element,r.dismissEvents,r.skip):(console.error("Missing element for action in the popup reducer."),e);case P:return w(e,r.dismissEvents);case f:return x();default:return e}},R=({children:e})=>e;function N({nodes:e,tier:r,tierEvents:p}){return l(v,{children:e.filter((e=>e.tier===r&&!((null==p?void 0:p.get(r))||[]).includes(e.key))).map((({node:e,key:r})=>l(g,{children:l(T,{children:e})},r)))})}function U({registerPopupTier:e,dismissEvents:r,children:i}){var s=p((()=>({registerPopupTier:e,dismissEvents:r})),[e,r]);return l(E.Provider,{value:s,children:l(g,{children:l(T,{children:i})})})}var I=({children:e})=>{var r=d(),[p,n]=a(D,{popupNodes:[],popupTierDismissals:new Map,popupTierEvents:new Map,popupTier:0,popupMaxTier:0,popupSkipTiers:new Map}),o=i(r),c=i([]),T=s(((e,r,p)=>{e===r?t((()=>n(p))):c.current=[{pageviewUid:r,event:p},...c.current]}),[n]),v=s(((e,p,i)=>{var s={type:h,element:e,dismissEvents:p,skip:i};T(o.current,r,s)}),[T,r,o]),E=s((e=>{var p={type:P,dismissEvents:e};T(o.current,r,p)}),[T,r,o]);return u((()=>{r!==o.current&&(o.current=r,n({type:f,dismissEvents:[]}),c.current.filter((e=>e.pageviewUid===r)).forEach((e=>n(e.event))),c.current=[])}),[n,o,r,c]),m(U,{registerPopupTier:v,dismissEvents:E,children:[l(g,{children:e}),l(N,{nodes:p.popupNodes,tier:p.popupTier,tierEvents:p.popupTierEvents})]})},O=e=>{var{registerPopupTier:r,dismissEvents:t}=c(E),{factory:n,key:o,eventTypes:a,tier:T,skip:d}=e,l=i(null),v=i(o),m=i(n),g=i(a);u((()=>{v.current!==o&&(v.current=o,m.current=n,g.current=a)}),[o,n,a]);var h=s((()=>{t(g.current)}),[t]),P=p((()=>({dismiss:h})),[h]);return u((()=>{l.current=m.current(P),r({node:l.current,key:o,tier:T},g.current,d)}),[o,r,P,T,d]),P};return e({Provider:U,Renderer:N}),[()=>{E=n({registerPopupTier:()=>{},dismissEvents:()=>{}}),g=o(R),e({DISMISS_POPUP:P,PopupHierarchyLithiumProvider:I,Provider:U,REGISTER_POPUP:h,Renderer:N,dismiss:w,register:M,usePopupHierarchyRender:O})},[e=>(p=e.useMemo,i=e.useRef,s=e.useCallback,t=e.startTransition,u=e.useEffect,n=e.createContext,o=e.memo,a=e.useReducer,c=e.useContext),e=>T=e.ErrorBoundary,e=>d=e.usePageviewUid,e=>(l=e.jsx,v=e.Fragment,m=e.jsxs)]]},["1o4yt4","183pm0","fgwvq1","121h32"]]);
