(this.$WP=this.$WP||[]).push(["7l5hpv",(e,l)=>{"use strict";var t,a,n,i,r,u,o,s,d,c,T,p,y,I,h,g,O,R,_,S,E,A,m,N,v=e=>{var l=`${T().toString(16).padStart(16,"0")}.ssid`;return null!=e?e:l},L=(e,l,n,i,u,o,s)=>{var d=r(),{page:c}=d,[T,y]=t(""),[I,h]=t(i),g=p(),O=null!=u.geoId&&u.geoId>1?u.geoId:1,R=a((()=>{h(i);var l=String(Date.now());y(l),g({Typeahead:{startEvent:{typeaheadId:l,searchSessionId:e,uiOrigin:n,scope:String(O),page:c,beforeQuery:i,afterQuery:i,totalNum:o}}})}),[n,e,i,h,O,c,g,o]),_=a(((t,a,r,u,d,p,y,h)=>{g({Typeahead:{selectEvent:{typeaheadId:T,searchSessionId:e,resultsId:l,uiOrigin:n,scope:String(O),page:c,beforeQuery:I,afterQuery:i,totalNum:o,value:p,errors:s?[s]:null,fromHistory:a,selDepth:r+1,placeType:y||null,dataType:d,selectionUrl:h||null,selectionMethod:t,selectedDocumentId:p,durationResultsShown:u?Date.now()-u:-1}}})}),[n,e,l,i,I,O,T,o,s,g,c]);return{logTypeaheadOpened:R,logResultSelection:a(((e,l,t,a,n)=>{_(e,l,a,n,t.trackingType,t.key,t.trackingPlaceType||null,t.url)}),[_]),logQuickLinkSelection:a(((e,l,t,a)=>{_(e,!0,-1,l,"QUICK_LINK",`QUICK_LINK_${t}`,t,a)}),[_]),logSearchAction:a((t=>{g({Typeahead:{searchEvent:{typeaheadId:T,searchSessionId:e,resultsId:l,uiOrigin:n,scope:String(O),page:c,beforeQuery:I,afterQuery:i,totalNum:o,errors:s?[s]:null,durationResultsShown:t?Date.now()-t:-1}}})}),[n,e,l,i,I,O,T,o,s,c,g]),startQuery:I,typeaheadId:T}},f={__key:0x5eec1d8288aa,id:"5eec1d8288aa8741918a2a5051d289ef",loc:{},definitions:[]},C=(e,l,t)=>{var a=null!=t.latitude&&null!=t.longitude,n={q:e,searchSessionId:l,searchNearby:a?"true":"",latitude:null!=t.latitude?String(t.latitude):"",longitude:null!=t.longitude?String(t.longitude):"",geo:a?"":String(t.geoId)};return`/Search?${new URLSearchParams(n).toString()}`},k=["ACCOMMODATION","EATERY","ATTRACTION","CAR_RENTAL_OFFICE"],U=(e,l,t,a)=>{var n=[];if(!e||!e.Typeahead_autocomplete||!e.Typeahead_autocomplete.results)return{results:n,resultsId:""};var{results:i,resultsId:r}=e.Typeahead_autocomplete,u=i.reduce(((e,l)=>{var t,a,n;if("Typeahead_LocationItem"===(null==l?void 0:l.__typename)&&null!=(null==(t=l.details)?void 0:t.placeType)&&null!=l.details.localizedName&&null!=(null==(a=l.details.locationV2)||null==(n=a.names)?void 0:n.longOnlyHierarchyTypeaheadV2)&&null!=l.locationId){var{locationId:i}=l,{localizedName:r,placeType:u}=l.details,o=l.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=o){var s=r+o+u;if(!Object.keys(e).includes(s)){var d={};d[s]=[],Object.assign(e,d)}e[s].push(i)}}return e}),{}),s=Object.values(u).filter((e=>Array.isArray(e)&&e.length>1)).flatMap((e=>e)),d=e=>{var l,t;if(null!=e.locationId&&null!=(null==(l=e.details)||null==(t=l.locationV2)?void 0:t.names)){var a=null!=e.details.placeType&&k.includes(e.details.placeType)&&null!=e.details.streetAddress&&null!=e.details.streetAddress.street1&&s.includes(e.locationId)?e.details.streetAddress.street1:null,n=e.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=n)return null==a?n:`${a}, ${n}`}return null},c=e=>{var{highlightingInfo:l}=e;if(!l||!l.length)return null;for(var t=[],a=0;a<l.length;a++){var n=l[a];if(!n)return console.error("Typeahead highlighting info is not expected to have null elements"),null;t.push(n)}return t};return i.forEach((e=>{if(null!=e){var a=null;switch(e.__typename){case"Typeahead_LocationItem":a=(e=>{if(null!=e.locationId&&e.details&&null!=e.details.localizedName&&null!=e.details.url){var l,a,n,i=!e.details.isGeo,r=((e,l)=>{var t,a,n,i;return e.linkType?"VACATION_RENTALS"===e.linkType?null==(a=l.details)||null==(n=a.locationV2)||null==(i=n.vacationRentalsRoute)?void 0:i.url:!0===(null==(t=l.details)?void 0:t.isGeo)?l.details[`${e.linkType}_URL`]:null:null})(t,e);return{searchText:e.details.localizedName,title:e.details.localizedName,highlightingInfo:c(e),url:null!=r?r:e.details.url,image:i?null==(l=e.details.thumbnail)?void 0:l.photoSizeDynamic:null,key:`LOCATION_${e.documentId}`,subtitle:d(e),hierarchy:(null==(a=e.details.locationV2)?void 0:a.hierarchy)||void 0,trackingType:"LOCATION",trackingPlaceType:null==(n=e.details)?void 0:n.placeType,locationId:e.locationId}}return null})(e);break;case"Typeahead_QuerySuggestionItem":a=(e=>{if(null!=e.text){var a,n,i="article"===e.suggestionType,r=null==(a=e.parentGeoDetails)||null==(n=a.names)?void 0:n.longOnlyHierarchyTypeaheadV2,u=i?O:null!=e.buCategory&&m.get(e.buCategory)||g;return{searchText:e.text,title:e.text,highlightingInfo:c(e),subtitle:i?_(o,{id:"typeahead_articles_read_more"}):r,image:null,url:e.route&&e.route.url||C(e.text,l,t),icon:u,trackingType:"QUERY_SUGGESTION",key:e.documentId}}return null})(e);break;case"Typeahead_RescueResultItem":a=(e=>null!=e.text?{searchText:e.text,title:_(o,{id:"see_all_results_for",args:{query:e.text}}),url:C(e.text,l,t),icon:g,trackingType:"SEARCH",key:`SEARCH_${e.documentId}`}:null)(e);break;case"Typeahead_ListResultItem":a=(e=>{if(null!=e.locationId&&null!=e.documentId&&null!=e.listResultType&&null!=e.details&&null!=e.details.localizedName){var l,t,a,i,r,u,s,d,c=e.listResultType;if("/ShowForum"===(d="FORUM"===c?(null==(s=e[`${c}ListURL`])?void 0:s.url)||"":e.details[`${c}ListURL`]||"")||""===d)return null;var T=(()=>{switch(c){case"HOTEL":return _(o,{id:"common_Hotels"});case"RESTAURANT":return _(o,{id:"common_Restaurants"});case"ATTRACTION":return _(o,{id:"common_Thingstodo"});case"FORUM":return _(o,{id:"common_Forums"});default:return""}})();n.push({searchText:(null==(l=e.details)?void 0:l.localizedName)||"",title:_(o,{id:"m2_trips_detail_date_display",args:{0:T,1:(null==(t=e.details)?void 0:t.localizedName)||""}}),subtitle:null!=e.locationId&&null!=(null==(a=e.details)||null==(i=a.locationV2)?void 0:i.names)?e.details.locationV2.names.longOnlyHierarchyTypeaheadV2:null,url:d,icon:g,image:null==(r=e.details)||null==(u=r.thumbnail)?void 0:u.photoSizeDynamic,trackingType:"LIST_RESULT",locationId:e.locationId,key:`LIST_RESULT_${c}_${e.documentId}`})}return null})(e)}a&&(a.label=e.sponsored?_(o,{id:"social_mobile_reason_for_sponsored"}):void 0,n.push(a))}})),a&&n.push({searchText:"",title:_(o,{id:"add_a_missing_place_cta"}),url:"/CreateListing.html",icon:R,trackingType:"AddAPlace",key:"AddAPlace"}),{results:n,resultsId:null==r?"unknown":r}},D="add_a_place_entry_point__web__1678235107",H={results:[],resultsId:""},G={batch:!1},b=["default","love_your_local","insurance_lander"],P=["typeahead-q","articles"],x=(e,l,a,r,o=10,T,p)=>{var[y,I]=t(H),h=E(p),{logTypeaheadOpened:g,logResultSelection:O,logQuickLinkSelection:R,logSearchAction:_,typeaheadId:m}=A(h,y.resultsId,l,e,a,y.results.length),v=((e,l)=>{var[a,r]=t(e),u=n(Date.now());return i((()=>{var l=Date.now(),t=100-(l-u.current);if(t<=0)return u.current=l,void r(e);var a=setTimeout((()=>{u.current=Date.now(),r(e)}),t);return()=>clearTimeout(a)}),[e,100]),a})(e),L=d(),C=s(),k=u(),U=null!=a.latitude&&null!=a.longitude?{latitude:a.latitude,longitude:a.longitude}:null,x=null!=a.geoId?a.geoId:0,w="WORLDWIDE";x>1&&"LocationTypeahead"!==r?w="IN_GEO_EXTEND_WORLDWIDE":x>1&&"LocationTypeahead"===r?w="IN_GEO":null!=U&&(w="NEAR_POSITION_EXTEND_WORLDWIDE");var Q=a.pageType,V={listResultType:Q,searchSessionId:h,typeaheadId:m,uiOrigin:l,routeUid:k,userLocation:a.userLocation},$=["LOCATION","QUERY_SUGGESTION","RESCUE_RESULT",...null!=Q?["LIST_RESULT"]:[]],q={query:v,limit:o,scope:w,locale:C,scopeGeoId:x,searchCenter:U,types:$,locationTypes:["GEO","AIRPORT","ACCOMMODATION","ATTRACTION","ATTRACTION_PRODUCT","EATERY","NEIGHBORHOOD","AIRLINE","SHOPPING","UNIVERSITY","GENERAL_HOSPITAL","PORT","FERRY","CORPORATION","VACATION_RENTAL","SHIP","CRUISE_LINE","CAR_RENTAL_OFFICE"],userId:L,context:V,articleCategories:b,enabledFeatures:P};"GeoPicker"===r&&l.includes("RESTAURANTS")||"LinkTypeSearch"===r&&"RESTAURANTS"===a.linkType?(q.types=["LOCATION","RESCUE_RESULT"],q.locationTypes=["GEO","NEIGHBORHOOD","EATERY"]):"GeoPicker"===r&&l.includes("HOTELS")||"LinkTypeSearch"===r&&"HOTELS"===a.linkType?(q.types=["LOCATION","RESCUE_RESULT"],q.locationTypes=["GEO","NEIGHBORHOOD","ACCOMMODATION"]):"GeoPicker"===r&&l.includes("ATTRACTIONS")||"LinkTypeSearch"===r&&"ATTRACTIONS"===a.linkType?(q.types=["LOCATION","RESCUE_RESULT"],q.locationTypes=["GEO","ATTRACTION","ATTRACTION_PRODUCT","NEIGHBORHOOD"]):"GeoPicker"===r?(q.types=["LOCATION","RESCUE_RESULT"],q.locationTypes=["GEO","NEIGHBORHOOD"]):"LocationTypeahead"===r&&(q.types=["LOCATION"],T&&(q.locationTypes=T));var M,[{data:z,error:F,fetching:W},Y]=c({query:f,variables:{request:q},context:G,pause:!0}),j="internal_override"===(null==(M=S({experimentKeys:[D]},!z))?void 0:M[D])||"test"===(null==M?void 0:M[D]),B=n(Y);return i((()=>{B.current=Y})),i((()=>{if(!F){var e=N(z,h,a,j);I(e)}}),[z,F,h,a,j]),i((()=>{(e=>e&&e.length>=1)(v)?B.current():I(H)}),[v]),{results:y,logTypeaheadOpened:g,logResultSelection:O,logQuickLinkSelection:R,logSearchAction:_,searchSessionId:h,fetching:W}};return[()=>{E=v,A=L,m=new Map([["SEARCH",g],["ATTRACTIONS",y],["HOTELS",I],["RESTAURANTS",h]]),N=U,e({MIN_QUERY_LENGTH:1,default:x})},[e=>(t=e.useState,a=e.useCallback,n=e.useRef,i=e.useEffect),e=>(r=e.useRoute,u=e.usePageviewUid),e=>(o=e.default,s=e.useLocale),e=>d=e.useUserId,e=>c=e.useQuery,e=>T=e.useStableRandom,e=>p=e.useInteractionLogger,e=>y=e.default,e=>I=e.default,e=>h=e.default,e=>g=e.default,e=>O=e.default,e=>R=e.default,e=>_=e.jsx,e=>S=e.default]]},["1o4yt4","fgwvq1","17thqz","52far5","1mqwhq","uc42ar","32pwc7","s1ymgp","1c5q3i","o3mm96","1qx89h","j1i9fl","1flcs8","121h32","gugp1d"]]);
