(this.$WP=this.$WP||[]).push(["1shkoq",(e,n)=>{"use strict";var t,i,l,a,o,r,d,s,c,u,p,v,m,g,h,f,w,b,_,k,C,I,R,x,y,T,M,N,P,A,S,D,L,B,q,j,V,z,O,E,W,H,F,J,U,Q,G,X,K,Y,$,Z,ee,ne,te,ie,le,ae,oe,re,de,se,ce,ue,pe,ve,me,ge,he,fe,we=({id:e,type:n,helpfulVoteCount:t,isLiked:i=!1,onLikeClick:l})=>{var{localize:a}=w(),o={__typename:n,socialStatistics:{isLiked:i,likeCount:t},id:e},[r,s,c]=b({item:o,onClick:l});return _(d,{variant:"clear",icon:s?g:h,onClick:r,size:"small","aria-label":s?a.string("sng_click_to_remove_helpful_vote"):a.string("sng_click_to_add_helpful_vote"),children:c})},be=({model:e})=>{var{hasVotedReviewHelpful:n,helpfulVoteAction:t,helpfulVotes:i}=e,{trackClick:l}=R();if(null==(null==t?void 0:t.objectId))return console.error("[Fusion] The helpful vote id was not present so the module could not be created"),null;var a=parseInt(t.objectId,10),o=parseInt(null==i?void 0:i.text,10)||0;return _(oe,{id:a,type:"Review",helpfulVoteCount:o,isLiked:n||!1,onLikeClick:()=>l({clientContext:"voteReview"})})},_e={__key:0x5bb83a24d45d,id:"5bb83a24d45d62096490819df02c9ad6",loc:{},definitions:[]},ke=({reviewId:e,onClick:n})=>{var[,l]=W(_e),[a]=t(F),o=U(),r=i((()=>e=>{e.removeReview||a({node:_(J,{children:_(f,{id:"social_no_permission"})}),timeout:8e3})}),[a]),d=i((()=>l({id:e})),[l,e]);return[i((()=>{o({flowOrigin:"login",pid:40469}).then((()=>{try{n&&n()}catch(e){console.error("problem occurred when triggering onClick in delete review flow")}})).then(d).then(r)}),[o,d,r,n])]},Ce=({reviewId:e,onClose:n,onDeleteReview:t})=>{var{localize:l}=w(),[a]=de({reviewId:e}),o=i((e=>{t&&t(),e(),a()}),[t,a]);return E((({close:e})=>_(O,{title:l("delete_confirmation_header_review_0"),onClose:e,primaryButton:_(r,{onClick:()=>o(e),children:l("inbox_swipe_delete")}),secondaryButton:_(r,{variant:"secondary",onClick:e,children:l("aao_delete_cancel_btn_fffff375")}),children:_(p,{variant:"body-01",elementType:"span",marginLeft:"spacing-04",marginTop:"spacing-04",children:l("delete_confirmation_description_review_0")})})),{onClose:n})},Ie=({model:e,reviewId:n,onReviewDelete:t,ownerReview:a=!1})=>{var{localize:o}=w(),{trackClick:r}=R(),{open:s}=z({id:String(n)}),{open:c}=V({id:String(n),onClose:()=>r({clientContext:"closeReportModal"})}),{open:u}=se({reviewId:n,onDeleteReview:()=>{r({clientContext:"selectDeleteInModal"}),t&&t()}}),p=i(((e,n)=>{"ReportIAPWebviewAction"===e&&n?(r({clientContext:"reportManagementResponse"}),s()):"ReportIAPWebviewAction"===e?(r({clientContext:"reportReview"}),c()):"DeleteMediaMutationAction"===e&&(r({clientContext:"deleteReview"}),u())}),[r,s,c,u]),v=l((()=>e?e.filter(Boolean).filter((e=>{var n;return null!=(null==(n=e.actionName)?void 0:n.text)})).map((e=>{var n;return{onClick:()=>p(e.actionType,a),displayName:null==(n=e.actionName)?void 0:n.text}})):[]),[e,a,p]);return v&&_("div",{className:"_T",children:_(j,{options:v,menuVariant:"trailing-top-caret",label:o.string("sng_review_options"),mode:"menu",onOpen:()=>r({clientContext:"threeDotCTA",clientParameter:a?"ownerResponse":"review"}),fullscreenMobile:!0,trigger:({active:e,onKeyDown:n,ariaAttributes:t,ref:i,onClick:l})=>_(d,{ref:i,ariaAttributes:t,onKeyDown:n,variant:"clear",icon:q,size:"small","aria-label":e?o.string("sng_close_options_menu"):o.string("sng_open_options_menu"),onClick:e=>{l&&l(e)}})})})},Re=({model:e})=>{var n,{displayName:t,ownerResponseId:i,profileImage:l,profileRoute:a,publishedDate:o,reportAction:r,text:d}=e,{trackClick:s}=R(),u=Q();null===i&&console.error("The owner response id was not able to be parsed, will continue to show owner response, with no review actions");var v=(null==a?void 0:a.webLinkUrl)||(null==a?void 0:a.url)||void 0,m=null==l||null==(n=l.photoSizes)?void 0:n.filter(Boolean).map((e=>({url:e.url||"",width:e.width||0,height:e.height||0})));return k(C,{children:[k("div",{className:"CXZQW M k MI",children:[null!==t&&_(B,{variant:"two-line",profileInfo:[{displayName:t,avatarSource:m,profileHref:v}]}),r&&null!==i&&_("div",{className:"Sgbpo",children:_(ce,{model:[r],reviewId:i,ownerReview:!0})})]}),_(c,{onExpand:()=>s({clientContext:"readMore"}),children:_(p,{variant:"body-01",textOverflow:"ellipsis",children:d})}),o&&_(p,{variant:"supporting-02",marginBottom:"spacing-02",marginTop:"spacing-03",children:_(D,{model:o})}),_(p,{variant:"supporting-02",children:u("MANAGEMENT")})]})},xe=({model:e})=>{var{label:n,value:t}=e;return k("div",{className:"d Mj Nj MI NL",children:[_("span",{className:"bfHbu",children:_(X,{color:"bubbleIcon",size:16})}),t&&_(p,{variant:"title-05",elementType:"span",marginX:"spacing-01",children:_(D,{model:t})}),n&&_(p,{variant:"body-01",elementType:"span",children:_(D,{model:n})})]})},ye={__key:0xf12f5e212206,id:"f12f5e212206ea84fdbe021db1bb1f92",loc:{},definitions:[]},Te=(e,n,t=!1)=>{return i=H({query:ye,variables:l((()=>({...e,request:{...e.request,updateToken:n}})),[e,n]),pause:t}),l((()=>{var[{data:e,...n},t]=i;return[{...n,data:null==e?void 0:e.Result,operation:void 0},t]}),[i]);var i},Me=({onClose:e,translationButtonInfo:n})=>{var t,i,l,a,o,r,d,s;"Routing_OnDemandReviewMachineTranslationParameters"===(null==(t=n.webRoute)||null==(i=t.typedParams)?void 0:i.__typename)&&({contentType:o,contentId:r,reviewId:d,targetLanguage:s}=n.webRoute.typedParams);var{localize:c}=w(),[{data:u,fetching:v,polling:m,error:g}]=me({request:{routeParameters:{contentId:r,contentType:o,reviewId:d,targetLanguage:s}}}),h=null==u||null==(l=u.sections)||null==(a=l[0])?void 0:a.content,b=v||m;return _(O,{onClose:e,widthOption:"fixed-40",children:k("div",{className:"MM",children:[(null!=g||null==h&&!b)&&_(p,{variant:"title-02",children:_(f,{id:"sng_translating_review_error"})}),b&&_("div",{className:"f u j",children:_($,{variant:"large","aria-label":c.string("fusion_review_translation_loading")})}),!b&&null!=h&&_(fe,{model:h,isTranslatedReview:!0})]})})},Ne=({photos:e,onOpenPhoto:n,onCloseMediaViewer:t,contentType:l})=>{var o=le(),{locationId:r,pageName:d}=((e,n,t)=>{var i,l,a=null==(i=n.find(Boolean))||null==(l=i.photo)?void 0:l.locationId,o=(e=>{switch(e){case"attraction_product":return"AttractionProductReview";case"attraction":return"Attraction_Review";case"hotel":return"Hotel_Review";case"restaurant":return"Restaurant_Review";default:return null}})(t);return null!=o&&null!=a?{locationId:a,pageName:o}:null!=a&&a!==e.params.detailId&&"Attraction_Review"===e.page?{locationId:a,pageName:"AttractionProductReview"}:{locationId:e.params.detailId||0,pageName:String(e.page)}})(o,e,l),s=ee(d),c={...ne,...te(d)},[u,p]=a(null),{localize:v}=w(),{actionHandler:m}=ie(),g=i((()=>{p(null),t&&t()}),[t]),h=i((e=>{p({mediaId:{id:e||0,type:"p"},albumId:s}),n&&n(e)}),[s,n]);return k(C,{children:[u&&_(ae,{locationId:r,initialSettings:u,onClose:g,actionHandler:m,...c.mediaViewerParams}),_("div",{className:"LblVz _e q",children:e.filter(Boolean).map((e=>{var n,t,i,l;return _("button",{className:"ajoIU _S B-",onClick:()=>h(e.photoId),"aria-label":v.string("sng_see_full_review_image"),children:_(Z,{source:null!=(n=e.photo)&&null!=(t=n.photoSizeDynamic)&&t.urlTemplate?null==(i=e.photo)?void 0:i.photoSizeDynamic:null==(l=e.photo)?void 0:l.photoSizes,width:100,height:100})},e.photoId)}))})]})},Pe=({seoProps:e,children:n})=>{var t=e&&e.lang?e.lang:void 0;return t?_("span",{lang:t,children:n}):n},Ae=(e,n)=>_(Pe,{seoProps:n,children:_(P,{model:e})}),Se=({isTranslatedReview:e,helpfulVote:n,reviewActions:t,setReviewDeleted:i})=>{var l;return e?null:null!=n&&null!=(l=n.helpfulVoteAction)&&l.objectId?k("div",{className:"f",children:[n&&_(re,{model:n}),t&&_(ce,{model:t,reviewId:parseInt(n.helpfulVoteAction.objectId,10),onReviewDelete:()=>i(!0)})]}):(console.error("[Fusion] The review id was not able to be parsed, will continue to show review, with no review actions"),null)},De=({model:e,isTranslatedReview:n=!1,contentType:t})=>{var{bubbleRatingNumber:i,bubbleRatingText:l,cardLink:r,helpfulVote:d,htmlText:g,htmlTitle:h,labels:f,machineTranslationProvider:w,ownerResponse:b,photos:C,publishedDate:I,reviewActions:x,safetyText:y,seoProps:T,subratings:M,supplierName:B,tip:q,tipText:j,userProfile:V,onDemandTranslationButton:z}=e,[O,E]=a(!1),[W,{openModal:H,closeModal:F}]=K("googleTranslate"),{trackClick:J}=R(),{url:U,trackingContext:Q}=v({internalOrExternalLink:r}),{text:X}=m(z),{text:$,url:Z,trackingContext:ee}=m(B),ne=null!==T?JSON.parse(T):void 0,te=new Map([["Language Weaver",3],["Language Weaver/TA Edited",4],["Google",5],["MicroSoft",6],["ProMT",7],["AsiaOnline",8]]).get(w);return!O&&k("div",{className:"_c","data-automation":"reviewCard",children:[k("div",{className:"mwPje f M k",children:[V&&_(L,{model:V}),_(Se,{isTranslatedReview:n,helpfulVote:d,reviewActions:x,setReviewDeleted:E})]}),f&&f.length>0&&_("div",{className:"TqVEa",children:f.filter(Boolean).map(((e,n)=>_(S,{model:e},n)))}),_("div",{children:null!==i&&_(o,{rating:i})}),h&&_(p,{variant:"title-05",marginY:"spacing-02",children:null!=U?_(N,{href:U,theme:"standalone",trackingDetails:{clientContext:Q},children:Ae(h,ne)}):Ae(h,ne)}),y&&k("div",{className:"ngcUv",children:[_(u,{size:20,color:"dangerIcon"}),_(p,{variant:"title-05",elementType:"span",marginX:"spacing-02",children:_(D,{model:y})})]}),l&&null!==l.text&&_("div",{className:"RpeCd",children:_(A,{model:l})}),g&&k(c,{variant:"extended",onExpand:()=>J({clientContext:"readMore"}),children:[_(Pe,{seoProps:ne,children:_(P,{model:g})}),M&&_("div",{children:M.filter(Boolean).map(((e,n)=>_(pe,{model:e},n)))})]}),k("div",{children:[q&&_(p,{variant:"title-05",marginRight:"spacing-01",elementType:"span",children:_(D,{model:q})}),j&&_(D,{model:j})]}),C&&C.length>0&&_(he,{photos:C,onOpenPhoto:e=>J({clientContext:"openMediaViewer",clientParameter:String(e)}),onCloseMediaViewer:()=>J({clientContext:"closeMediaViewer"}),contentType:t}),!n&&null!=X&&_(s,{onClick:H,marginTop:"spacing-04",marginBottom:"spacing-02",children:_(D,{model:X})}),n&&_("div",{className:"JsqaP",children:_("a",{href:"https://translate.google.com",target:"_blank",children:_("img",{src:"/img2/google/powered_by_google_translate.png",alt:"Google"})})}),$&&_(p,{variant:"body-01",marginY:"spacing-03",children:null!=Z?_(N,{href:Z,theme:"inline",trackingDetails:{clientContext:ee},children:_(D,{model:$})}):_(D,{model:$})}),k("div",{className:"TreSq",children:[te&&_(p,{variant:"supporting-02",marginBottom:"spacing-02",children:_(Y,{providerId:te})}),I&&_(p,{variant:"supporting-02",marginBottom:"spacing-02",children:_(D,{model:I})}),_(p,{variant:"supporting-02",marginBottom:"spacing-03",children:_(G,{variant:"MEMBER"})})]}),!n&&b&&_("div",{className:"hjJJO PJ",children:_(ue,{model:b})}),!n&&z&&W&&_(ge,{onClose:F,translationButtonInfo:z})]})};return[()=>{oe=we,re=I(be),de=ke,se=Ce,ce=x(Ie),ue=x(Re),pe=I(xe),ve=y({executeQuery:Te,extractPollingStatus:e=>T(null==e?void 0:e.status),mergeUpdate:M}),me=ve,ge=Me,he=Ne,fe=x(De),e("default",fe)},[e=>(t=e.useContext,i=e.useCallback,l=e.useMemo,a=e.useState),e=>o=e.BubbleRating,e=>(r=e.default,d=e.CircularButton,s=e.BorderlessButton),e=>c=e.default,e=>u=e.default,e=>p=e.default,e=>(v=e.deriveLinkInfo,m=e.deriveLinkInfoFromInternalLink),e=>g=e.default,e=>h=e.default,e=>(f=e.default,w=e.useLocalize),e=>b=e.useLikeAction,e=>(_=e.jsx,k=e.jsxs,C=e.Fragment),e=>(I=e.fusionComponent,R=e.useTracking,x=e.fused,y=e.createUseWPSQuery,T=e.defaultExtractPollingStatus,M=e.defaultMergeSectionResults,N=e.FusionTrackedLink),e=>P=e.default,e=>A=e.default,e=>S=e.Label,e=>D=e.default,e=>L=e.default,e=>B=e.default,e=>q=e.default,e=>j=e.DropdownMenu,e=>(V=e.default,z=e.useReportManagementResponseModal),e=>O=e.Modal,e=>E=e.useVDOMPortal,e=>(W=e.useMutation,H=e.useQuery),e=>(F=e.Toast,J=e.ToastItem),e=>U=e.default,e=>(Q=e.default,G=e.TransparencyLinkReviewDisclosure),e=>X=e.default,e=>K=e.useModalWithTracking,e=>Y=e.default,e=>$=e.Spinner,e=>Z=e.default,e=>(ee=e.getDefaultAlbumId,ne=e.defaultMediaSettings,te=e.getPageMediaSettings),e=>ie=e.default,e=>le=e.useRoute,e=>ae=e.default]]},["1o4yt4","1bkeq2","jppfwt","livpad","1y0uq3","1essqv","3j2edp","wehxiu","1u47wj","17thqz","b9lpgd","121h32","rmpbxq","1qg907","ebif6s","8aurmi","1lg8go","9bcnfh","1dpmjf","1mvpl5","1ntn26","1a2xbq","1i3sz5","14euae","1mqwhq","tr3542","lchj5q","12ksxj","przyts","lsw8fw","k3csuh","1qndsd","34bu7w","1r144n","vmhwnp","fgwvq1","ejmcf4"]]);
