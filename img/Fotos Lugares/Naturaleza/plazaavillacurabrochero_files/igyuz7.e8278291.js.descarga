(this.$WP=this.$WP||[]).push(["igyuz7",(e,t)=>{"use strict";var r,i,a,n,s,o,u,l,d,g,c,p,m,v,I,w,h,b,f,y=({children:e,eligibility:t,impressionKey:r})=>{var a=i((()=>({impressionKey:r,eligibility:t})),[t,r]);return I(f.Provider,{value:a,children:e})},E=()=>a(f),G="unknown",_="requiredLoginActivated",T="requiredLoginPagesViewed",P=18e5,C=()=>{var e,t,r=null==(e=window)||null==(t=e.navigator)?void 0:t.connection;return r?[r.effectiveType||G,r.type||G]:[G,G]},A=["AttractionsFusion"],D=["Restaurants","Restaurant_Review"],H=e=>{var t=u.get("sponsoredListingIdClicked");return t&&t===e},L=()=>{var{impressionKey:e,eligibility:t}=E();return R(t,e)},R=(e,t)=>{var r=c(),i=S(e.variant),{page:a}=d(),{geoId:s,locationId:o}=k();return n(((e,n,u,l)=>{r({page:a,itemType:e,itemName:u,customData:JSON.stringify({...i,...n}),geoId:s,locationId:o,impressionKey:t,userId:l})}),[r,i,a,s,o,t])},x=()=>{var e=g(),t=E(),r=S(t.eligibility.variant),{page:i}=d(),{geoId:a,locationId:s}=k();return n(((n,o,u="click",l,d)=>{e({page:i,actionType:u,actionSubType:l,itemType:n,itemName:o,customData:JSON.stringify({...r,...d}),geoId:a,locationId:s,impressionKey:t.impressionKey})}),[e,r,i,a,s,t])},S=e=>{var t=V();return i((()=>({variant:e,isDated:t})),[e,t])},V=()=>{var{page:e}=d(),t=l(),{restaurants:r,attractions:a}=t;return i((()=>A.includes(e)?!(null==a||!a.fromDate)&&!(null==a||!a.toDate)||!(null==a||!a.singleDate):D.includes(e)?!(null==r||!r.date):void 0),[e,a,r])},k=()=>{var{params:e}=d(),t="geoId"in e&&e.geoId||null,r="detailId"in e&&e.detailId||null;return i((()=>({geoId:t,locationId:r})),[t,r])},O=(e,t)=>{var r=R(e,t),i=m(),a=!p(i),s="MOBILE"===w();return n((()=>{s&&r("MembershipHardGateGhost",{googleOneTapEligible:a,businessLogicEligible:e.businessLogicEligible,showHardGate:e.showHardGate})}),[r,e,a,s])},M=(e,t)=>{var r=L(),i=s(null),a=n((()=>{var a=Date.now();i.current&&clearTimeout(i.current),i.current=setTimeout((()=>{r(t,{actualTime:(Date.now()-a)/1e3})}),e)}),[e,t,r]);return o((()=>()=>clearTimeout(i.current)),[]),a},N=e=>{if(!e)return null;switch(e){case"TA":return"email";case"GOOGLE":return"google";case"LINE":return"line";default:return null}},K=()=>u.get(T)||[],q=(e,t)=>K().some((r=>r.servlet===e&&r.pageId===t)),B=(e,t)=>{if(!q(e,t)){var r=K();r.push({servlet:e,pageId:t}),u.set(T,r,P)}},F=(e,t)=>{switch(e){case"ShowTopic":case"MobileShowTopic":return t.topicId||1;case"Profile":return t.username||1;case"ShowUserReviews":case"MobileShowUserReviews":return t.review||1;case"FAQ_Answers":case"MobileFAQ_Answers":return t.topic||1;case"Trips":return t.tripId||1;default:return t.detailId||t.geoId||1}},U=(e,t)=>{var r=F(e,t),i=q(e,r);return K().length>=1&&!i},W=()=>K().length,j=(e,t)=>{o((()=>{!e&&t&&u.set(_,(new Date).getTime())}),[e,t])},z=()=>{var e=u.get(_);return e?new Date(e):null},Y="reqlo_ml_re_training_ab_test_1680099792",J=()=>{var e=!!b(),{bucket:t,fetching:r}=h({experiment:Y,logImpression:!1,treatControlAsNull:!1},e),{eligible:i,fetching:a}=Q(e),n="test"===t,s=r||a;return h({experiment:Y,logImpression:!0},e||s||!i),s?{fetching:s}:{fetching:s,variant:$(t),businessLogicEligible:i,showHardGate:i&&n&&!s}},Q=e=>{var t="MOBILE"===w(),{bucket:r,fetching:i}=h({experiment:"reqlo_override_1684413631",logImpression:!1,treatControlAsNull:!1},!t||e);return{eligible:!e&&t&&!i&&"override"===r,fetching:i}},$=e=>{switch(e){case"control":return"control";case"test":return"test";default:return"unbucketed"}};return[()=>{f=r({impressionKey:v(),eligibility:{variant:"unbucketed",businessLogicEligible:!1,showHardGate:!1}}),e({HardGateContext:f,HardGateContextProvider:y,ML_PAGE_VIEWED_KEY:"mlHardGatePageViewCount",MODAL_NAME:"memx_mobile_hardgate_pageview",PAGES_VIEWED_EXPIRATION:P,PAGE_COUNT_TRIGGER:2,PREVIOUSLY_VIEWED_PAGES_KEY:T,addPageToViewed:B,findPageIdentifier:F,getConnectionType:C,getCurrentPageViewCount:W,getHardGateViewTimestamp:z,getPagesViewed:K,isFromSponsoredClick:H,pageCountTriggerReached:U,pageHasBeenViewed:q,sourceFromLoginProvider:N,useBounceTracking:M,useHardGateContext:E,useHardGateEligibility:J,useHardGateGhostImpression:O,useHardGateImpression:L,useHardGateInteraction:x,useHardGateViewRecord:j,useIsDated:V,useRouteIds:k})},[e=>(r=e.createContext,i=e.useMemo,a=e.useContext,n=e.useCallback,s=e.useRef,o=e.useEffect),e=>u=e.default,e=>l=e.useTravelInfo,e=>d=e.useRoute,e=>g=e.default,e=>c=e.default,e=>p=e.shouldSuppressRegistrationDialog,e=>m=e.useSessionId,e=>v=e.uuid,e=>I=e.jsx,e=>w=e.useViewportCategory,e=>h=e.useExperimentBucket,e=>b=e.useUserId]]},["1o4yt4","19b9b1","1etaac","fgwvq1","1r73jw","xg719z","cyrz7y","1al4vi","1eww82","121h32","1ys6v1","a2qxj9","52far5"]]);
