(this.$WP=this.$WP||[]).push(["1cd4f9",(e,t)=>{"use strict";var a,i,r,n,o,l,d,s,c,u,m,g,p,h,v,_,C,f,y,T,I,b,P={__key:59929300219420,id:"368160a6b61cd4af533bdfab39750e5b",loc:{},definitions:[]},k=({productData:e,onContinueExploring:t,onContinueToCart:a,onCloseModal:i})=>{var{cancellationPolicy:r,locationId:n,geoId:o,price:d,subTotalPrice:u,rating:b,ratingCount:P,thumbnail:k,title:D,tourGrade:w,travelDate:z,numberOfItems:S}=e,x=v(),N="DESKTOP"===x,q="MOBILE"===x,A="TABLET"===x,E=h(),L=T("div",{children:[I(f,{variant:"supporting-01",marginBottom:"spacing-01",children:z}),T("div",{className:"zCTwv",children:[I(p,{marginRight:"spacing-01"}),r]})]}),M=(e=>{switch(e){case"DESKTOP":return I(y,{height:330});case"TABLET":return I(y,{height:282});default:return I(y,{height:333})}})(v());return T(C,{onClose:i,widthOption:"fixed-80",title:I(s,{id:"fusion_attractions_cart_added_to_cart"}),variant:"fixed-height-sticky-footer",children:[T("div",{className:"AixFN",children:[I(l,{scope:{scopeType:"item",itemType:"AddToCartModule",itemId:"AddToCartItemCard",customData:{price:d,locationId:n,module:"modal"}},children:I(g,{title:D,rating:b,reviewCount:P,thumbnail:k,primaryInfo:w,secondaryInfo:L,merchandisingText:d,titleLineClamp:2,width:N?200:70,height:N?200:70,enforceMaxImageSize:!0})}),T("div",{className:"VCubs",children:[N&&I(f,{variant:"title-03",marginBottom:"spacing-03",children:I(s,{id:"fusion_attractions_cart_order_details_v2"})}),T("div",{className:"azqLZ k",children:[I(f,{variant:"title-05",children:I(s,q||A?{id:"fusion_attractions_cart_subtotal_items",args:{numItems:S}}:{id:"fusion_attractions_cart_subtotal_items_number",args:{numItems:S}})}),I(f,{variant:"title-05",children:u})]}),T("div",{className:"DkpnT",children:[I(m,{variant:"commerce",size:"small",fullWidth:!0,marginBottom:A?"spacing-00":"spacing-03",marginRight:A?"spacing-03":"spacing-00",onClick:a,href:E,children:I(c,{id:"fusion_attractions_cart_view_cart_checkout"})}),I(m,{variant:"secondary-commerce",size:"small",fullWidth:!0,onClick:t,children:I(s,{id:"fusion_attractions_cart_continue_exploring"})})]})]})]}),I(_,{geoId:o,detailId:n,shelfGroup:"ADDED_TO_CART",scrollContainer:"design-system",titleTypography:"title-04",titleMargin:{marginBottom:"spacing-03"},cardType:"Vertical",scrollContainerSize:A?"medium":"narrow",nameLineClamp:2,loadingSkeleton:M})]})},D=({addToCartData:e,onClose:t})=>{var n,l,s,c,m,g,p=r(),{trackInteraction:h}=d(),v=u(),{cartItems:_}=e,C=_&&0!==_.length?_[_.length-1]:null,f=null==C||null==(n=C.productParameters.bookingProduct)?void 0:n.primary_ta_geo_id,y=o(),[{data:T}]=a({query:P,variables:{geoId:`${f||""}`},pause:null==f}),{url:k}=(null==T||null==(l=T.Routing_canonicalize)?void 0:l[0])||{};if(null===C)return null;var D=null!=(s=null==_?void 0:_.reduce(((e,t)=>e+t.availability.price),0))?s:0,w=I("div",{dangerouslySetInnerHTML:{__html:C.display.gradeName}}),z={cancellationPolicy:C.productParameters.cancellationCondition,locationId:C.productParameters.locationId,geoId:null==(c=C.productParameters.bookingProduct)?void 0:c.primary_ta_geo_id,price:C.availability.priceFormatted,rating:null==(m=C.productParameters.bookingProduct)?void 0:m.rating,ratingCount:null==(g=C.productParameters.bookingProduct)?void 0:g.num_reviews,thumbnail:C.display.imageUrl,title:C.display.productName,tourGrade:w,travelDate:C.productParameters.checkinDateUI};return I(b,{productData:{...z,numberOfItems:_?_.length:0,subTotalPrice:v.formatCurrency(D)},onCloseModal:t,onContinueExploring:()=>{t(),i.resetCartInfoWithNewTimestamp(p,!1),h({subType:"continueExploring"}),k&&y(k)},onContinueToCart:()=>h({subType:"viewCart"})})},w=({addToCartData:e,onClose:t})=>{var{params:a,page:i}=n(),r="detailId"in a&&a.detailId?a.detailId:void 0;return I(l,{scope:{scopeType:"page",team:"Attractions",pageName:i,pageLocationId:r},impressionWhenSeen:!1,children:I(D,{addToCartData:e,onClose:t})})};return[()=>{b=k,e("default",w)},[e=>a=e.useQuery,e=>i=e.AbandonedCartFreqController,e=>r=e.useSessionId,e=>n=e.useRoute,e=>o=e.useNavigate,e=>(l=e.TrackingScope,d=e.useTracking),e=>(s=e.default,c=e.UnsafeLocalize,u=e.useIntlFormatter),e=>m=e.default,e=>g=e.HorizontalMerchandisingCard,e=>p=e.default,e=>h=e.useCartUrlWithFunnelKey,e=>v=e.useViewportCategory,e=>_=e.ShelvesByShelfGroup,e=>C=e.Modal,e=>f=e.default,e=>y=e.Skeleton,e=>(T=e.jsxs,I=e.jsx)]]},["1mqwhq","13srhr","1al4vi","fgwvq1","10ad67","zzfm0c","17thqz","jppfwt","1asj0s","9fds1k","7ovr7c","1ys6v1","cth31o","1i3sz5","1essqv","1qndsd","121h32"]]);
