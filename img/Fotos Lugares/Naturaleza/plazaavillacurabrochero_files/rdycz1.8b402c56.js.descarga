(this.$WP=this.$WP||[]).push(["rdycz1",(e,r)=>{"use strict";var o,i,n,l,a,t,s,d,u,c,h,g,w,p,f,v,y,m,S,O,C="https://smartlock.google.com",b=({options:e,onReady:r,onShowOverlay:l,onFlowStepChange:a,forwardedRef:t,scrolling:s="auto",initialWidth:d})=>{var[u,c]=o(d),[h,g]=o(),[m,S]=o(!1),O="MOBILE"===w(),{onSuccess:b,isFullWidthMobile:I,isFullHeight:R}=e,k=i((e=>{var r,o=e.resultData||"";if(o){var i=(e=>{var r={};try{r=JSON.parse(e)}catch(r){return console.error(`Error parsing controller result data: ${e}`),null}return"object"!=typeof r?(console.error("Parsed controller result is not an object."),null):{userId:r.user_id,hasCreatedMember:!!r.hasCreatedMember,hasAcceptedTermsOfUse:!!r.hasAcceptedTermsOfUse,loginProvider:r.loginProvider}})(o);null!=i&&i.hasCreatedMember,b&&b(i)}else b&&b(null);e.jsCallback&&(r=e.jsCallback)&&console.error(`Non-empty JSCallback is returned from RegController: ${r}`)}),[b]),F=i((e=>{e>100&&(O&&I?c("100%"):(!d||e>=d)&&c(e))}),[d,O,I]),{displayOnShowOverlay:M,onClose:P,onFailure:x}=e,$=i((o=>{var i=o,n=(e=>{if(!e)return null;if(!e.origin||0!==e.origin.indexOf("https")||e.origin!==document.location.origin)return null;if(!e.data||!e.data.indexOf||-1===e.data.indexOf("action"))return null;try{var r=JSON.parse(e.data);return r.action?r:null}catch(e){return null}})(i);if((e=>{e&&e.origin&&0===e.origin.indexOf(C)&&e.data&&e.data.type&&e.source&&e.source.postMessage({type:"verifyAck",data:e.data.data},{targetOrigin:C})})(i),n){var{action:t}=n;switch(t){case"successClose":k(n);break;case"reloadWindow":console.error("Unexpected reload window message is received from RegController iframe");break;case"fwdToRelativeUrl":var s=n.url||"";s||console.error("No url specified to forward to."),0!==s.indexOf("/")&&console.error(`Cannot forward to absolute url: ${s}`),window.location=s;break;case"resizeFrame":F(n.width),n.height>100&&(R?g("100%"):e.ignoreScreenHeight?g(n.height):g(Math.min(n.height,window.innerHeight)));break;case"domReady":S(!0),r&&r();break;case"dismiss":P&&P();break;case"showOverlay":M&&l&&l();break;case"generalError":x&&x();break;case"splash":case"regSignIn":case"regSignUp":case"regForgotPassword":a&&a(t)}}}),[e.ignoreScreenHeight,R,k,M,l,a,P,r,F,x]);f("message",$);var B=n((()=>{var r=e.extraQueryParams||{};Object.keys(r).forEach((e=>{void 0===r[e]&&delete r[e]}));var o=new URLSearchParams({flow:e.flow,flowOrigin:e.flowOrigin,pid:`${e.pid}`,hideNavigation:"true",userRequestedForce:"true",returnTo:"",isLithium:"true",...r});return e.mcid&&o.append("mcid",`${e.mcid}`),e.locationId&&o.append("locationId",`${e.locationId}`),e.stateToken&&o.append("stateToken",e.stateToken),void 0!==e.requireSecure&&o.append("requireSecure",`${String(!!e.requireSecure)}`),`/RegistrationController?${o.toString()}`}),[e.extraQueryParams,e.flow,e.flowOrigin,e.locationId,e.mcid,e.pid,e.requireSecure,e.stateToken]);return y("div",{className:p("lpwrL o B- M_",{Ra:!O}),style:{width:u,height:h},children:y(v,{className:"bFOrV _R B- o",src:B,title:"regcontroller",style:{width:u,height:h,display:m?"block":"none"},ref:t,scrolling:s})})},I=({options:e,closeX:r})=>{var l="MOBILE"===w(),[a,t]=o(!1),s=i((()=>{e.displayOnShowOverlay||t(!0)}),[e.displayOnShowOverlay]),d=i((()=>{t(!0)}),[]),u=n((()=>y(S,{options:e,onReady:s,onShowOverlay:d})),[s,e,d]);return m(h,{onClose:e.onClose,containerProps:{backgroundColor:"transparent",disableBodyScroll:!0},bodyProps:{isFullBleed:!0},enableCloseIcon:a&&r,roundedCorners:!l,hideBoxShadow:e.hideBoxShadow,children:[y("div",{style:{display:a?"block":"none"},children:u}),!a&&y("div",{className:"bJuxk","data-automation":null!=e&&e.flow?`${e.flow}_spinner`:"flow_spinner",children:y(g,{size:"large",variant:"primary"})})]})},R=()=>{var e=u(),r=d(),h=c(),{geoId:g}=r.params,[w,p]=o({flow:"CORE_COMBINED",flowOrigin:"join",pid:-1}),[f,v]=o({closeX:!0}),m=s(),S=l(void 0),C=t((()=>y(O,{options:w,closeX:f.closeX})),{},[w,f]),b=i((o=>e&&!o.forceLogin?Promise.resolve({userId:e,hasCreatedMember:null}):S.current?S.current:a()?("undefined"!=typeof window&&(window.location.href=`/RegistrationController?flow=${encodeURIComponent(o.flow||"CORE_COMBINED")}&pid=${encodeURIComponent(String(o.pid||-1))}&returnTo=${encodeURIComponent(r.path)}&fullscreen=true`),new Promise((()=>{}))):(S.current=new Promise((e=>{p({flow:o.flow||"CORE_COMBINED",flowOrigin:o.flowOrigin||"join",pid:o.pid||-1,isFullWidthMobile:o.isFullWidthMobile||!1,hideBoxShadow:o.hideBoxShadow||!1,extraQueryParams:o.extraQueryParams||{},displayOnShowOverlay:o.deferShowOverlay,requireSecure:o.requireSecure||!1,locationId:g||-1,onSuccess:r=>{var i={userId:(null==r?void 0:r.userId)||null,hasCreatedMember:!(null==r||!r.hasCreatedMember),loginProvider:null==r?void 0:r.loginProvider};o.onSuccess&&o.onSuccess(i),C.close(),S.current=null,h({userId:i.userId}),e(i)},onClose:()=>{m({module:"regoverlay",action:"closed",context:[g||"",o.flow].join("|"),value:o.pid||void 0,nonInteraction:!1}),C.close(),S.current=null,o.onClose&&o.onClose()},onFailure:()=>{o.onFailure&&o.onFailure()}}),v({closeX:!1!==o.closeX}),C.open()})),S.current)),[e,r.path,g,C,h,m]);return n((()=>({login:b,close:C.close})),[b,C.close])},k=({flow:e,flowOrigin:r="login",pid:o=-1,isFullWidthMobile:i=!1,forceLogin:n=!1,extraQueryParams:l={},deferShowLogin:a=!0,requireSecure:t=!1,ignoreScreenHeight:s=!1,onReady:d,onLoginSuccess:h,onLoginFailure:g,onShowOverlay:w,onFlowStepChange:p,forwardedRef:f,scrolling:v,initialWidth:m,isFullHeight:O})=>{var C=u(),b=c();return C&&!n?null:y(S,{options:{flow:e,flowOrigin:r,pid:o,isFullWidthMobile:i,extraQueryParams:l,displayOnShowOverlay:a,requireSecure:t,isFullHeight:O,ignoreScreenHeight:s,onSuccess:e=>{b({userId:(null==e?void 0:e.userId)||null}),h&&h(e)},onFailure:()=>{g&&g()}},onShowOverlay:w,onFlowStepChange:p,forwardedRef:f,scrolling:v,initialWidth:m,onReady:d})};return[()=>{S=b,O=I,e({AuthGate:k,default:R})},[e=>(o=e.useState,i=e.useCallback,n=e.useMemo,l=e.useRef),e=>a=e.default,e=>t=e.useVDOMPortal,e=>s=e.useGARecorder,e=>d=e.useRoute,e=>(u=e.useUserId,c=e.useAuthenticate),e=>h=e.default,e=>g=e.LoadingSpinner,e=>w=e.useViewportCategory,e=>p=e.default,e=>f=e.useWindow,e=>v=e.EmbeddedContent,e=>(y=e.jsx,m=e.jsxs)]]},["1o4yt4","z2lnv4","14euae","32pwc7","fgwvq1","52far5","17u7gi","1l9qeu","1ys6v1","fkji80","ltllz9","dyfdn5","121h32"]]);
