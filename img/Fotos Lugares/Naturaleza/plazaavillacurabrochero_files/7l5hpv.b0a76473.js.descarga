(this.$WP=this.$WP||[]).push(["7l5hpv",(e,l)=>{"use strict";var t,a,n,i,r,u,o,s,d,c,T,p,y,I,h,g,O,R,S,E,_,A,m,N=e=>{var l=`${T().toString(16).padStart(16,"0")}.ssid`;return null!=e?e:l},L=(e,l,n,i,u,o,s)=>{var d=r(),{page:c}=d,[T,y]=t(""),[I,h]=t(i),g=p(),O=null!=u.geoId&&u.geoId>1?u.geoId:1,R=a((()=>{h(i);var l=String(Date.now());y(l),g({Typeahead:{startEvent:{typeaheadId:l,searchSessionId:e,uiOrigin:n,scope:String(O),page:c,beforeQuery:i,afterQuery:i,totalNum:o}}})}),[n,e,i,h,O,c,g,o]),S=a(((t,a,r,u,d,p,y,h)=>{g({Typeahead:{selectEvent:{typeaheadId:T,searchSessionId:e,resultsId:l,uiOrigin:n,scope:String(O),page:c,beforeQuery:I,afterQuery:i,totalNum:o,value:p,errors:s?[s]:null,fromHistory:a,selDepth:r+1,placeType:y||null,dataType:d,selectionUrl:h||null,selectionMethod:t,selectedDocumentId:p,durationResultsShown:u?Date.now()-u:-1}}})}),[n,e,l,i,I,O,T,o,s,g,c]);return{logTypeaheadOpened:R,logResultSelection:a(((e,l,t,a,n)=>{S(e,l,a,n,t.trackingType,t.key,t.trackingPlaceType||null,t.url)}),[S]),logQuickLinkSelection:a(((e,l,t,a)=>{S(e,!0,-1,l,"QUICK_LINK",`QUICK_LINK_${t}`,t,a)}),[S]),logSearchAction:a((t=>{g({Typeahead:{searchEvent:{typeaheadId:T,searchSessionId:e,resultsId:l,uiOrigin:n,scope:String(O),page:c,beforeQuery:I,afterQuery:i,totalNum:o,errors:s?[s]:null,durationResultsShown:t?Date.now()-t:-1}}})}),[n,e,l,i,I,O,T,o,s,c,g]),startQuery:I,typeaheadId:T}},v={__key:0x5eec1d8288aa,id:"5eec1d8288aa8741918a2a5051d289ef",loc:{},definitions:[]},f=(e,l,t)=>{var a=null!=t.latitude&&null!=t.longitude,n={q:e,searchSessionId:l,searchNearby:a?"true":"",latitude:null!=t.latitude?String(t.latitude):"",longitude:null!=t.longitude?String(t.longitude):"",geo:a?"":String(t.geoId)};return`/Search?${new URLSearchParams(n).toString()}`},C=["ACCOMMODATION","EATERY","ATTRACTION","CAR_RENTAL_OFFICE"],k=(e,l,t)=>{var a=[];if(!e||!e.Typeahead_autocomplete||!e.Typeahead_autocomplete.results)return{results:a,resultsId:""};var{results:n,resultsId:i}=e.Typeahead_autocomplete,r=n.reduce(((e,l)=>{var t,a,n;if("Typeahead_LocationItem"===(null==l?void 0:l.__typename)&&null!=(null==(t=l.details)?void 0:t.placeType)&&null!=l.details.localizedName&&null!=(null==(a=l.details.locationV2)||null==(n=a.names)?void 0:n.longOnlyHierarchyTypeaheadV2)&&null!=l.locationId){var{locationId:i}=l,{localizedName:r,placeType:u}=l.details,o=l.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=o){var s=r+o+u;if(!Object.keys(e).includes(s)){var d={};d[s]=[],Object.assign(e,d)}e[s].push(i)}}return e}),{}),u=Object.values(r).filter((e=>Array.isArray(e)&&e.length>1)).flatMap((e=>e)),s=e=>{var l,t;if(null!=e.locationId&&null!=(null==(l=e.details)||null==(t=l.locationV2)?void 0:t.names)){var a=null!=e.details.placeType&&C.includes(e.details.placeType)&&null!=e.details.streetAddress&&null!=e.details.streetAddress.street1&&u.includes(e.locationId)?e.details.streetAddress.street1:null,n=e.details.locationV2.names.longOnlyHierarchyTypeaheadV2;if(null!=n)return null==a?n:`${a}, ${n}`}return null},d=e=>{var{highlightingInfo:l}=e;if(!l||!l.length)return null;for(var t=[],a=0;a<l.length;a++){var n=l[a];if(!n)return console.error("Typeahead highlighting info is not expected to have null elements"),null;t.push(n)}return t};return n.forEach((e=>{if(null!=e){var n=null;switch(e.__typename){case"Typeahead_LocationItem":n=(e=>{if(null!=e.locationId&&e.details&&null!=e.details.localizedName&&null!=e.details.url){var l,a,n,i=!e.details.isGeo,r=((e,l)=>{var t,a,n,i;return e.linkType?"VACATION_RENTALS"===e.linkType?null==(a=l.details)||null==(n=a.locationV2)||null==(i=n.vacationRentalsRoute)?void 0:i.url:!0===(null==(t=l.details)?void 0:t.isGeo)?l.details[`${e.linkType}_URL`]:null:null})(t,e);return{searchText:e.details.localizedName,title:e.details.localizedName,highlightingInfo:d(e),url:null!=r?r:e.details.url,image:i?null==(l=e.details.thumbnail)?void 0:l.photoSizeDynamic:null,key:`LOCATION_${e.documentId}`,subtitle:s(e),hierarchy:(null==(a=e.details.locationV2)?void 0:a.hierarchy)||void 0,trackingType:"LOCATION",trackingPlaceType:null==(n=e.details)?void 0:n.placeType,locationId:e.locationId}}return null})(e);break;case"Typeahead_QuerySuggestionItem":n=(e=>{if(null!=e.text){var a,n,i="article"===e.suggestionType,r=null==(a=e.parentGeoDetails)||null==(n=a.names)?void 0:n.longOnlyHierarchyTypeaheadV2,u=i?O:null!=e.buCategory&&A.get(e.buCategory)||g;return{searchText:e.text,title:e.text,highlightingInfo:d(e),subtitle:i?S(o,{id:"typeahead_articles_read_more"}):r,image:null,url:e.route&&e.route.url||f(e.text,l,t),icon:u,trackingType:"QUERY_SUGGESTION",key:e.documentId}}return null})(e);break;case"Typeahead_RescueResultItem":n=(e=>null!=e.text?{searchText:e.text,title:S(o,{id:"see_all_results_for",args:{query:e.text}}),url:f(e.text,l,t),icon:g,trackingType:"SEARCH",key:`SEARCH_${e.documentId}`}:null)(e);break;case"Typeahead_ListResultItem":n=(e=>{if(null!=e.locationId&&null!=e.documentId&&null!=e.listResultType&&null!=e.details&&null!=e.details.localizedName){var l,t,n,i,r,u,s,d,c=e.listResultType;if("/ShowForum"===(d="FORUM"===c?(null==(s=e[`${c}ListURL`])?void 0:s.url)||"":e.details[`${c}ListURL`]||"")||""===d)return null;var T=(()=>{switch(c){case"HOTEL":return S(o,{id:"common_Hotels"});case"RESTAURANT":return S(o,{id:"common_Restaurants"});case"ATTRACTION":return S(o,{id:"common_Thingstodo"});case"FORUM":return S(o,{id:"common_Forums"});default:return""}})();a.push({searchText:(null==(l=e.details)?void 0:l.localizedName)||"",title:S(o,{id:"m2_trips_detail_date_display",args:{0:T,1:(null==(t=e.details)?void 0:t.localizedName)||""}}),subtitle:null!=e.locationId&&null!=(null==(n=e.details)||null==(i=n.locationV2)?void 0:i.names)?e.details.locationV2.names.longOnlyHierarchyTypeaheadV2:null,url:d,icon:g,image:null==(r=e.details)||null==(u=r.thumbnail)?void 0:u.photoSizeDynamic,trackingType:"LIST_RESULT",locationId:e.locationId,key:`LIST_RESULT_${c}_${e.documentId}`})}return null})(e)}n&&(n.label=e.sponsored?S(o,{id:"social_mobile_reason_for_sponsored"}):void 0,a.push(n))}})),a.push({searchText:"",title:S(o,{id:"add_a_missing_place_cta"}),url:"/CreateListing.html",icon:R,trackingType:"AddAPlace",key:"AddAPlace"}),{results:a,resultsId:null==i?"unknown":i}},U={results:[],resultsId:""},D={batch:!1},H=["default","love_your_local","insurance_lander"],G=["typeahead-q","articles"],b=(e,l,a,r,o=10,T,p)=>{var[y,I]=t(U),h=E(p),{logTypeaheadOpened:g,logResultSelection:O,logQuickLinkSelection:R,logSearchAction:S,typeaheadId:A}=_(h,y.resultsId,l,e,a,y.results.length),N=((e,l)=>{var[a,r]=t(e),u=n(Date.now());return i((()=>{var l=Date.now(),t=100-(l-u.current);if(t<=0)return u.current=l,void r(e);var a=setTimeout((()=>{u.current=Date.now(),r(e)}),t);return()=>clearTimeout(a)}),[e,100]),a})(e),L=d(),f=s(),C=u(),k=null!=a.latitude&&null!=a.longitude?{latitude:a.latitude,longitude:a.longitude}:null,b=null!=a.geoId?a.geoId:0,P="WORLDWIDE";b>1&&"LocationTypeahead"!==r?P="IN_GEO_EXTEND_WORLDWIDE":b>1&&"LocationTypeahead"===r?P="IN_GEO":null!=k&&(P="NEAR_POSITION_EXTEND_WORLDWIDE");var x=a.pageType,w={listResultType:x,searchSessionId:h,typeaheadId:A,uiOrigin:l,routeUid:C,userLocation:a.userLocation},Q=["LOCATION","QUERY_SUGGESTION","RESCUE_RESULT",...null!=x?["LIST_RESULT"]:[]],V={query:N,limit:o,scope:P,locale:f,scopeGeoId:b,searchCenter:k,types:Q,locationTypes:["GEO","AIRPORT","ACCOMMODATION","ATTRACTION","ATTRACTION_PRODUCT","EATERY","NEIGHBORHOOD","AIRLINE","SHOPPING","UNIVERSITY","GENERAL_HOSPITAL","PORT","FERRY","CORPORATION","VACATION_RENTAL","SHIP","CRUISE_LINE","CAR_RENTAL_OFFICE"],userId:L,context:w,articleCategories:H,enabledFeatures:G};"GeoPicker"===r&&l.includes("RESTAURANTS")||"LinkTypeSearch"===r&&"RESTAURANTS"===a.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD","EATERY"]):"GeoPicker"===r&&l.includes("HOTELS")||"LinkTypeSearch"===r&&"HOTELS"===a.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD","ACCOMMODATION"]):"GeoPicker"===r&&l.includes("ATTRACTIONS")||"LinkTypeSearch"===r&&"ATTRACTIONS"===a.linkType?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","ATTRACTION","ATTRACTION_PRODUCT","NEIGHBORHOOD"]):"GeoPicker"===r?(V.types=["LOCATION","RESCUE_RESULT"],V.locationTypes=["GEO","NEIGHBORHOOD"]):"LocationTypeahead"===r&&(V.types=["LOCATION"],T&&(V.locationTypes=T));var[{data:$,error:q,fetching:M},z]=c({query:v,variables:{request:V},context:D,pause:!0}),F=n(z);return i((()=>{F.current=z})),i((()=>{if(!q){var e=m($,h,a);I(e)}}),[$,q,h,a]),i((()=>{(e=>e&&e.length>=1)(N)?F.current():I(U)}),[N]),{results:y,logTypeaheadOpened:g,logResultSelection:O,logQuickLinkSelection:R,logSearchAction:S,searchSessionId:h,fetching:M}};return[()=>{E=N,_=L,A=new Map([["SEARCH",g],["ATTRACTIONS",y],["HOTELS",I],["RESTAURANTS",h]]),m=k,e({MIN_QUERY_LENGTH:1,default:b})},[e=>(t=e.useState,a=e.useCallback,n=e.useRef,i=e.useEffect),e=>(r=e.useRoute,u=e.usePageviewUid),e=>(o=e.default,s=e.useLocale),e=>d=e.useUserId,e=>c=e.useQuery,e=>T=e.useStableRandom,e=>p=e.useInteractionLogger,e=>y=e.default,e=>I=e.default,e=>h=e.default,e=>g=e.default,e=>O=e.default,e=>R=e.default,e=>S=e.jsx]]},["1o4yt4","fgwvq1","17thqz","52far5","1mqwhq","uc42ar","32pwc7","s1ymgp","1c5q3i","o3mm96","1qx89h","j1i9fl","1flcs8","121h32"]]);
