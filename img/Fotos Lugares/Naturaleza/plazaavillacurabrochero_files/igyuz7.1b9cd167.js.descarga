(this.$WP=this.$WP||[]).push(["igyuz7",(e,t)=>{"use strict";var i,r,a,n,s,o,u,l,d,c,g,v,m,p,w,f,h,I,y,b,S,_,T,R,E,G,A,N,C,F,L=({children:e,eligibility:t,impressionKey:i})=>{var a=r((()=>({impressionKey:i,eligibility:t})),[t,i]);return w(_.Provider,{value:a,children:e})},k=()=>a(_),H="unknown",D="sponsoredListingIdClicked",P="requiredLoginActivated",q=()=>{var e,t,i=null==(e=window)||null==(t=e.navigator)?void 0:t.connection;return i?[i.effectiveType||H,i.type||H]:[H,H]},x=["AttractionsFusion"],V=["Restaurants","Restaurant_Review"],M=e=>{var t=u.get(D);return t&&t===e},B=e=>{u.set(D,e,18e5)},K=()=>{var{impressionKey:e,eligibility:t}=k();return O(t,e)},O=(e,t)=>{var i=g(),r=z(e.variant),{page:a}=d(),{geoId:s,locationId:o}=j();return n(((e,n,u,l)=>{i({page:a,itemType:e,itemName:u,customData:JSON.stringify({...r,...n}),geoId:s,locationId:o,impressionKey:t,userId:l})}),[i,r,a,s,o,t])},U=()=>{var e=c(),t=k(),i=z(t.eligibility.variant),{page:r}=d(),{geoId:a,locationId:s}=j();return n(((n,o,u="click",l,d)=>{e({page:r,actionType:u,actionSubType:l,itemType:n,itemName:o,customData:JSON.stringify({...i,...d}),geoId:a,locationId:s,impressionKey:t.impressionKey})}),[e,i,r,a,s,t])},z=e=>{var t=Q();return r((()=>({variant:e,isDated:t})),[e,t])},Q=()=>{var{page:e}=d(),t=l(),{restaurants:i,attractions:a}=t;return r((()=>x.includes(e)?!(null==a||!a.fromDate)&&!(null==a||!a.toDate)||!(null==a||!a.singleDate):V.includes(e)?!(null==i||!i.date):void 0),[e,a,i])},j=()=>{var{params:e}=d(),t="geoId"in e&&e.geoId||null,i="detailId"in e&&e.detailId||null;return r((()=>({geoId:t,locationId:i})),[t,i])},W=(e,t)=>{var i=O(e,t),r=m(),a=!v(r),s="MOBILE"===f();return n((()=>{s&&i("MembershipHardGateGhost",{googleOneTapEligible:a,businessLogicEligible:e.businessLogicEligible,showHardGate:e.showHardGate})}),[i,e,a,s])},J=(e,t)=>{var i=K(),r=s(null),a=n((()=>{var a=Date.now();r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{i(t,{actualTime:(Date.now()-a)/1e3})}),e)}),[e,t,i]);return o((()=>()=>clearTimeout(r.current)),[]),a},Y=e=>{if(!e)return null;switch(e){case"TA":return"email";case"GOOGLE":return"google";case"LINE":return"line";default:return null}},Z=(e,t)=>{o((()=>{!e&&t&&u.set(P,(new Date).getTime())}),[e,t])},$=()=>{var e=u.get(P);return e?new Date(e):null},X="requiredLoginPagesViewed",ee=-1,te={__key:25549676095309,id:"173cbf5e274d7e78e827a34e276eafcb",loc:{},definitions:[]},ie=e=>{var t,i,r,a,n,{locationId:s}=j(),[{data:o,fetching:u}]=S({query:te,variables:{locationId:s},pause:e||!s});return{hasSafetyReviews:!(null==o||null==(t=o.locations)||null==(i=t[0])||null==(r=i.reviewSummary)||!r.alertStatusCount),hasSafetyNotice:!(null==o||null==(a=o.LocationNotice_getActiveNotices)||null==(n=a[0])||!n.some((e=>(null==e?void 0:e.noticeType)&&A.has(null==e?void 0:e.noticeType)))),fetching:u}},re={__key:91099905217025,id:"52dad97d52012a6f69b3138056b1822e",loc:{},definitions:[]},ae=e=>{var t,i,{params:r}=d(),a="review"in r&&r.review||null,[{data:n,fetching:s}]=S({query:re,variables:{reviewId:a},pause:e||!a});return{isSafetyReview:!(null==n||null==(t=n.reviews)||null==(i=t[0])||!i.alertStatus),fetching:s}},ne={__key:20990293080125,id:"13172ef6783d58d761b578e7202419bc",loc:{},definitions:[]},se=e=>{var t,i,r,a=m(),[{data:n,fetching:s}]=S({query:ne,variables:{itemTypes:["CORE_SEM_USER","META_MARKETING_USER","EXP_PAID_TRAFFIC"],sessionId:a,stronglyConsistent:!1},pause:e});return{isExcludedTrafficSource:!(null==n||null==(t=n.UserSession_query)||null==(i=t[0])||null==(r=i.results)||!r.some((e=>!(null==e||!e.itemValue||!("booleanValue"in e.itemValue))&&e.itemValue.booleanValue))),fetching:s}},oe="reqlo_ml_re_training_ab_test_1680099792",ue=()=>{var e,t=!!b();o((()=>{e&&u.remove(X)}),[e=t]);var{bucket:i,fetching:r}=y({experiment:oe,logImpression:!1,treatControlAsNull:!1},t),{eligible:a,fetching:n}=le(t),s="test"===i,l=r||n;return y({experiment:oe,logImpression:!0},t||l||!a),l?{fetching:l}:{fetching:l,variant:me(i),businessLogicEligible:a,showHardGate:a&&s&&!l}},le=e=>{var t="MOBILE"===f(),i=de(),{eligible:r,fetching:a}=ce(e||!t||!i),{bucket:n,fetching:s}=y({experiment:"reqlo_override_1684413631",logImpression:!1,treatControlAsNull:!1},!t||e);return{eligible:!e&&t&&(!s&&"override"===n||i&&r),fetching:s||a}},de=()=>{var e=(()=>{var e=d(),{page:t}=e,i=m(),a=r((()=>(e=>{var{page:t,params:i}=e,r="geoId"in i&&i.geoId||null,a="detailId"in i&&i.detailId||null;switch(t){case"ShowTopic":return i.topicId||ee;case"Profile":return i.username||ee;case"ShowUserReviews":return i.review||ee;case"FAQ_Answers":return i.topic||ee;case"Trips":return i.tripId||ee;default:return a||r||ee}})(e)),[e]),n=(e=>{var t=u.get(X);return null!=t&&t.sessionId&&(null==t?void 0:t.sessionId)!==e?(u.remove(X),[]):(null==t?void 0:t.viewedPages)||[]})(i);return!((e,t,i)=>!(null==e||!e.some((e=>(null==e?void 0:e.page)===t&&(null==e?void 0:e.identifier)===i))))(n,t,a)&&(n.length+1>=2||(((e,t,i,r)=>{e.push({page:i,identifier:r}),u.set(X,{sessionId:t,viewedPages:e})})(n,i,t,a),!1))})(),t=ge();return e&&t},ce=e=>{var t=I(),{fetching:i,hasSafetyReviews:r,hasSafetyNotice:a}=N(e||!G.has(t)),{fetching:n,isSafetyReview:s}=C(e||"ShowUserReviews"!==t),{isExcludedTrafficSource:o,fetching:u}=F(e);return{eligible:!(r||a||s||o),fetching:i||n||u}},ge=()=>{var e=I(),t=ve(e);return T.has(e)&&t},ve=e=>{var t=h(),{locationId:i}=j(),r=!0;return"Tourism"===e?r=!R.has(t):"Attraction_Review"===e?r=!i||!E.has(i):"Restaurant_Review"===e&&(r=!i||!M(i)),r},me=e=>{switch(e){case"control":return"control";case"test":return"test";default:return"unbucketed"}};return[()=>{_=i({impressionKey:p(),eligibility:{variant:"unbucketed",businessLogicEligible:!1,showHardGate:!1}}),T=new Set(["AttractionsFusion","Attraction_Review","AttractionsNear","Restaurants","Restaurant_Review","Guide","Travel_Guide","Travel","Tourism","LocalMaps","Trips","ShowForum","ShowTopic","FAQ","FAQ_Answers","ShowUserReviews","Profile"]),R=new Set(["en-AU","en-CA","en-GB","en-HK","en-IE","en-IN","en-MY","en-NZ","en-PH","en-SG","en-US","en-ZA"]),E=new Set([102523,102533,102741,103227,103238,103436,103785,103887,104360,104365,104370,104486,104538,104576,104675,104863,105123,105125,105127,106745,107009,107447,107673,108123,108434,108678,108679,108688,109440,109446,109850,110078,110144,110145,110164,116580,124638,126583,128930,135569,136028,136053,142948,143358,143362,143367,143369,143718,143758,150546,156885,181825,186167,187547,187549,187552,187611,187621,187661,187743,188150,188151,188159,188527,188679,188681,188709,188757,189032,189281,189283,189284,189379,189683,190130,190131,190166,190204,190555,190573,190996,191e3,191040,191109,191172,191175,191226,192285,194251,194252,195083,195452,195477,195494,195555,197714,207831,208055,209760,210108,211708,211709,214806,216438,216633,218440,246750,261431,267031,275831,276576,278386,278811,286825,311684,481766,497518,501522,523246,523725,548860,553603,556427,590230,601755,602012,631111,641334,676922,1308856,1597190,1687489,1740559,1847870,1898273,1936404,1968471,2154770,2267934,3178955,3389561,3743225,5029425,6105541,7146418,7359401,8072300,8113935,8787137,10105731]),G=new Set(["Attraction_Review","Restaurant_Review"]),A=new Set(["FraudNote","FraudNoteBoosting","FraudNoteBullying","FraudNoteIncentives","FraudNoteLegalComplaint","FraudNoteOptimization","FraudNoteRestrictions","FraudNoteVandalism","LockDownBadge","MediaBadgeNote","SensitiveIssuesBadge"]),N=ie,C=ae,F=se,e({HardGateContext:_,HardGateContextProvider:L,ML_PAGE_VIEWED_KEY:"mlHardGatePageViewCount",getConnectionType:q,getHardGateViewTimestamp:$,isFromSponsoredClick:M,markFromSponsoredClick:B,sourceFromLoginProvider:Y,useBounceTracking:J,useHardGateContext:k,useHardGateEligibility:ue,useHardGateGhostImpression:W,useHardGateImpression:K,useHardGateInteraction:U,useHardGateViewRecord:Z,useIsDated:Q,useRouteIds:j})},[e=>(i=e.createContext,r=e.useMemo,a=e.useContext,n=e.useCallback,s=e.useRef,o=e.useEffect),e=>u=e.default,e=>l=e.useTravelInfo,e=>d=e.useRoute,e=>c=e.default,e=>g=e.default,e=>v=e.shouldSuppressRegistrationDialog,e=>m=e.useSessionId,e=>p=e.uuid,e=>w=e.jsx,e=>f=e.useViewportCategory,e=>h=e.useLocale,e=>I=e.default,e=>y=e.useExperimentBucket,e=>b=e.useUserId,e=>S=e.useQuery]]},["1o4yt4","19b9b1","1etaac","fgwvq1","1r73jw","xg719z","cyrz7y","1al4vi","1eww82","121h32","1ys6v1","17thqz","eqoaya","a2qxj9","52far5","1mqwhq"]]);
