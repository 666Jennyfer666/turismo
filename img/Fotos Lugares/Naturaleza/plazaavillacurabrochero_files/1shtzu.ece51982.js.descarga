(this.$WP=this.$WP||[]).push(["1shtzu",(e,t)=>{"use strict";var r,n,i,c,s,o,a,l,u,d,k,m,g,v,x,p=e=>!0===e?"User":!1===e?"Def":"UNKNOWN",C=e=>{e?a.set(m,e,18e5):a.remove(m)},f={trackingKey:"DEFAULT",trackingTitle:"DEFAULT"},y=(...e)=>e.map((e=>String(e))).join("-"),h=e=>null!=e&&""!==e&&"DEPRECATED"!==e.toUpperCase(),S=e=>t=>{var{context:r,type:n,forceImmediateCallbacks:i}=t,{trackingKey:c,trackingTitle:s,clientContext:o,clientParameter:a,scrollDirection:l,userState:u}=r,d={trackingKey:c,trackingTitle:s,clientParameter:a,clientContext:o,userState:u};if(h(r.trackingKey))switch(n){case"click":null!=i?e.logClickImmediate(d,i.onSuccess,i.onError):e.logClick(d);break;case"scroll":e.logScroll({...{...d,direction:l}});break;default:console.error("Unexpected event type",t.type,t)}},T=()=>{var e=(()=>{var e=n(),t=i(),u=r.useContext(l),d=r.useMemo((()=>u?(e=>{var t;if(e){var{hotelCommerce:r,attractionCommerce:n,restaurantCommerce:i}=e;if(!(r||n||i))return;var c=e.lastUpdated;r&&(t={...t,h:{ci:r.checkIn,co:r.checkOut,dt:p(null==r?void 0:r.setByUser),tt:c}}),n&&(t={...t,a:{ci:n.startDate,co:n.endDate,dt:p(null==n?void 0:n.setByUser),tt:c}}),i&&(t={...t,r:{ci:i.reservationTime?i.reservationTime.split("T")[0]:null,dt:p(null==i?void 0:i.setByUser),tt:c}})}return t})(u):void 0),[u]),k=s(),{path:g}=o(),x=r.useMemo((()=>({logClick(t){if(C(k),!v.exists(y("click",k,g,t.trackingKey,t.clientContext,t.clientParameter))){var r=c({...t,sessionId:k,dates:d});return e({AppPresentation:{click:r}}),!0}return!1},logClickImmediate(e,r,n){if(C(k),!v.exists(y("click",k,g,e.trackingKey,e.clientContext,e.clientParameter))){var i=c({...e,sessionId:k,dates:d});return t({AppPresentation:{click:i}}).then(r,n),!0}return r(),!1},logNewSession(t){C(k),e({AppPresentation:{newSession:{...t,sessionId:k,dates:d}}})},logScroll:t=>(C(k),!v.exists(y("scroll",k,g,t.trackingKey,t.clientContext,t.clientParameter))&&(e({AppPresentation:{sectionScroll:{...t,sessionId:k,dates:d}}}),!0))})),[k,g,e,t,d]);return r.useEffect((()=>{if(k){var e=a.get(m);e&&e===k||x.logNewSession({sessionId:k,deepLink:g}),C(k)}else C(null)})),x})(),t=r.useContext(x);return r.useCallback(t(e),[e,t])},I=e=>{var{context:t}=r.useContext(g),n=T();return r.useMemo((()=>({trackClick(r){n({type:"click",context:{...t,...e,...r}})},trackClickImmediate({details:r,callbacks:{onSuccess:i,onError:c}}){n({type:"click",context:{...t,...e,...r},forceImmediateCallbacks:{onSuccess:i,onError:c}})}})),[t,e,n])},E=({context:e,children:t})=>{var n=T(),i=function(e,t=k,n=u){var{timeout:i,threshold:c,rootMargin:s,onceOnly:o}={...k,...t},[a,l]=r.useState(!1),[d,m]=r.useState(!1);return r.useEffect((()=>{var t;return a&&(t=setTimeout((()=>{d&&o||(e(),m(!0))}),i)),()=>{clearTimeout(t)}}),[a,d,o,e,i]),n(l,s,c)}(r.useCallback((()=>{n({type:"scroll",context:e})}),[n,e]));return i&&d("div",{className:"C","data-ft":!0,ref:i,children:t})},P=e=>{var{trackingKey:t,trackingTitle:n,context:i,noVisibility:c=!1,scrollDirection:s=null,children:o}=e,a=r.useMemo((()=>({context:{scrollDirection:s,trackingKey:t,trackingTitle:n,...i}})),[i,s,t,n]);return h(t)?d(g.Provider,{value:a,children:c?o:d(E,{context:a.context,children:o})}):o},b=({context:e,impressions:t})=>r.useEffect((()=>{}),[e,t]);return[()=>{var t;k={rootMargin:0,threshold:0,timeout:500,onceOnly:!0},m="APS_SESSION_1.1",g=r.createContext({context:f}),t=new Set,v={exists(e){var r=t.has(e);return r||(t.add(e),setTimeout((()=>{t.delete(e)}),5e3)),r},reset(){t.clear()}},x=r.createContext(S),e({FusionTracking:P,isValidTrackingKey:h,useConsoleLogImpressions:b,useFusionTracking:I})},[e=>r=e,e=>(n=e.useInteractionLogger,i=e.useBlockingInteractionLogger),e=>c=e.enrichV2Event,e=>s=e.useSessionId,e=>o=e.useRoute,e=>a=e.default,e=>l=e.default,e=>u=e.useVisibleEffect,e=>d=e.jsx]]},["1o4yt4","32pwc7","4x6ber","1al4vi","fgwvq1","19b9b1","a9pavu","13btuy","121h32"]]);
