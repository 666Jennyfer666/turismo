(this.$WP=this.$WP||[]).push(["12wscm",(e,a)=>{"use strict";var r,l,t,i,d,n,s,o,u,c,_,p,m,T,h,v,C,k="_c",b=({trip:e,messageType:a,onCtaClick:d})=>{var n,s=r.useCallback((()=>{var a,r;d&&d(),null!=(a=e.route)&&a.url&&(window.location.href=null==(r=e.route)?void 0:r.url)}),[d,e]),o=m(p,{onClick:s,children:m(l,{id:"stat_modal_view_trip_v2"})});switch(a){case"CREATED":n=m(t,{id:"create_trip_success_toast_with_bold",args:{TripName:c((null==e?void 0:e.title)||"")}});break;case"SAVED":n=m(t,{id:"stat_modal_saved_to_tripname_with_bold",args:{TripName:c((null==e?void 0:e.title)||"")}});break;default:n=null}return m(i,{cta:o,children:m(_,{element:"savedToast",trip:e,children:m("span",{className:k,children:n})})})},y="bCZgg",I=({trip:e,onUndo:a})=>{var r;return m(i,{cta:m(p,{onClick:a,children:m(l,{id:"stat_modal_undo"})}),children:m(_,{element:"unsaveToast",trip:e,children:m("span",{className:k,children:m(t,{id:"stat_modal_removed_from_tripname_with_bold_v3",args:{TripName:c(null==e?void 0:e.title),TripLink:(null==(r=e.route)?void 0:r.url)||"",TripClass:y}})})})})},g=({trip:e,hideCta:a,onCtaClick:d})=>{var n,s=r.useCallback((()=>{d()}),[d]);return m(i,{cta:a?null:m(p,{onClick:s,children:m(l,{id:"stat_modal_change"})}),children:m(_,{element:"savedToast",trip:e,children:m("span",{className:k,children:m(t,{id:"stat_modal_saved_to_tripname_with_bold_v3",args:{TripName:c(null==e?void 0:e.title),TripLink:(null==(n=e.route)?void 0:n.url)||"",TripClass:y}})})})})},f=({onUndo:e})=>m(i,{cta:m(p,{onClick:e,children:m(l,{id:"stat_modal_undo"})}),children:m(l,{id:"stat_modal_removed_from_tripname",args:{sTripName:m(l,{id:"m1_trips_my_saves_header"})}})}),w=()=>{var[e,a]=r.useContext(d),[,t]=n(s),c=r.useCallback(((e,a)=>t({tripId:e,referenceId:`${a.id}`,referenceType:a.type,allowDuplicates:!1}).then((e=>{var a,r,l,t,i,d,n,s=null==e||null==(a=e.data)?void 0:a.addItemToTrip,o=null==e||null==(r=e.data)||null==(l=r.addItemToTrip)?void 0:l.trip,u=null==e||null==(t=e.data)||null==(i=t.addItemToTrip)||null==(d=i.errors)||null==(n=d[0])?void 0:n.error;return{trip:o,error:s?null:{query:"ADD_ITEM_TO_TRIP",tripsError:u||void 0}}})).catch((()=>({trip:null,error:{query:"ADD_ITEM_TO_TRIP"}})))),[t]),_=r.useCallback(((a,r,l)=>{e({node:m(T,{trip:a,messageType:r,onCtaClick:l})})}),[e]),p=r.useCallback(((a,r,l)=>{e({node:m(h,{trip:a,onUndo:()=>{c(a.id,r).then((e=>{l&&l(e.trip,e.error)}))}})})}),[c,e]),k=r.useCallback(((r,l,t,i=8e3)=>{e({node:m(v,{trip:r,onCtaClick:()=>{l&&l(),a()},hideCta:t}),timeout:i})}),[e,a]),b=r.useCallback((()=>{e({node:m(i,{children:m(l,{id:"m1_trips_save_success_stat_d2"})})})}),[e]),[,y]=n(o),I=r.useCallback((e=>y({id:`${e.id}`,type:e.type}).then((e=>{var a;return{isAdded:!(null==e||null==(a=e.data)||!a.MySaves_addToMySavesSingle)}})).catch((()=>({isAdded:!1})))),[y]),g=r.useCallback(((a,r)=>{e({node:m(C,{onUndo:()=>{I(a).then((e=>{r(e.isAdded)}))}})})}),[e,I]),f=r.useCallback((a=>e({node:m(i,{children:a})})),[e]);return{launchViewTripToast:_,launchRemoveFromTripToast:p,launchAutoSavedToTripToast:k,launchAddItemToMySavesToast:b,launchRemoveItemFromMySavesToast:g,launchErrorTripToast:r.useCallback((a=>{var r=m(i,{children:m(u,{query:a.query,error:a.tripsError})});e({node:r})}),[e]),launchToastMessage:f}};return[()=>{T=b,h=I,v=g,C=f,e("default",w)},[e=>r=e,e=>(l=e.default,t=e.UnsafeLocalize),e=>(i=e.ToastItem,d=e.Toast),e=>n=e.useMutation,e=>(s=e.AddItemToTrip,o=e.AddItemToMySaves),e=>u=e.default,e=>c=e.escapeHtml,e=>_=e.TripsImpression,e=>p=e.default,e=>m=e.jsx]]},["1o4yt4","17thqz","tr3542","1mqwhq","ag9b0s","mc5s4b","irfizf","665v5s","6g4avl","121h32"]]);
