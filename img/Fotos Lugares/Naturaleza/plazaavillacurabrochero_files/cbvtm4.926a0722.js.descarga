(this.$WP=this.$WP||[]).push(["cbvtm4",(e,r)=>{"use strict";var t,a,o,i,l,n,s,c,d,p,u,g,v,h,_,f,y,C,k,P,m,T,I,w,b,N,x,E,O,A,G,S=({onClose:e})=>{var{localize:r}=a();return i(t,{className:"wxIqd",children:i(o,{hidden:!0,isModalOnly:!0,onClose:e,highlightFirstResult:!0,closeOnResultClicked:!0,styleVariant:"box",searchMode:"GeoPicker",overlayVariant:"topCentered",scope:{geoId:1,linkType:"ATTRACTIONS"},source:"ExpCartIconPopover_ExploreNow_Geopicker",placeholderText:r.string("mobile_discovery_where_to")})})},q=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"AutoOpenedCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),z=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"UserClosedCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),M=(e,r)=>({click:{trackingKey:JSON.stringify({flow:"GlobalNavCartIcon",pageType:r}),trackingTitle:"ExploreNowClickCartIconPopover",clientParameter:"ShoppingCart",sessionId:e}}),R={__key:0x9dad92733350,id:"9dad92733350792d6fda9af4d08cde62",loc:{},definitions:[]},D=(e,r,t)=>{var a,o,[{data:i,fetching:l}]=g({query:R,variables:{page:e||"",geoId:t},pause:r});return{url:(null==i||null==(a=i.routes)||null==(o=a[0])?void 0:o.url)||null,fetching:l}},U=({hidePopover:e=(()=>{}),setGeoPickerOpened:r,variant:t="borderless"})=>{var{localize:o}=a(),l=u(),{page:n,params:g}=d(),v=p(),h="geoId"in g&&g.geoId||null,_=null==h||h<=1,{url:f}=E("Attractions",_,h),y=t=>{l({AppPresentation:M(v,n)}),e(),t.stopPropagation(),_&&(r(!0),t.preventDefault())},C=f||"/Attractions",k=o("TTD_Explore_Now");return"primary"===t?i(s,{variant:"primary",onClick:y,size:"small",children:k}):i(c,{role:_?"button":void 0,href:C,onClick:y,children:k})},B=({isCartEmpty:e,hidePopover:r,setGeoPickerOpened:t})=>{var{localize:o}=a(),n=i(b,{variant:"title-04",marginBottom:"spacing-02",children:o(e?"TTD_Add_Things_To_Cart":"TTD_Book_More_Things")}),s=i(b,{variant:"body-01",children:o(e?"TTD_Empty_Cart_Popover_Message":"TTD_Product_Cart_Popover_Message")});return l("div",{className:w({margin:"spacing-04"}),"data-automation":"cartPopover",children:[n,s,i(O,{hidePopover:r,setGeoPickerOpened:t})]})},K="expCartPopoverInfo",j=({triggerRef:e,isCartEmpty:r})=>{var{page:t}=d(),a="MOBILE"===k(),o=u(),s=p(),c=P(),g=v(null),[w,b]=h(!1),[E,O]=h(!1),S=_((()=>{E&&(o({AppPresentation:z(s,t)}),O(!1))}),[E,o,s,t,O]);I("Escape",S);var M=y({experimentKeys:["ta_vi_pdp_click_off_test_1672849503"],skipImpression:!0}),R=null===M,D=null==M?void 0:M.ta_vi_pdp_click_off_test_1672849503,U=!!R||D&&"control"!==D;return f((()=>{var e=!a&&(e=>{var r=N.get(K);return!r||r.lastUserId!==e})(c);e&&!U&&(o({AppPresentation:q(s,t)}),(e=>{var r={lastUserId:e};N.set(K,r,G)})(c),O(!0))}),[U,a,o,t,s,O,c]),C("click",(e=>{var r;"click"===e.type&&e.target instanceof Node&&(null==(r=g.current)||!r.contains(e.target))&&S()}),void 0),e.current?l(n,{children:[E&&i(T,{children:i(m,{unstyled:!0,autoFocus:!0,position:"below",alignEdge:"right",arrowType:"small",showArrowWhenUnstyled:!0,target:e.current,children:i("div",{ref:g,className:"gUpLp f H e _V Ra Gi",children:i(A,{isCartEmpty:r,hidePopover:S,setGeoPickerOpened:b})})})}),w&&i(x,{onClose:()=>b(!1)})]}):null};return[()=>{E=D,A=B,G=432e6,e({ExploreNowCta:O=U,GeoPickerModal:x=S,default:j})},[e=>t=e.OverlayPortal,e=>a=e.useLocalize,e=>o=e.default,e=>(i=e.jsx,l=e.jsxs,n=e.Fragment),e=>(s=e.default,c=e.BorderlessButton),e=>d=e.useRoute,e=>p=e.useSessionId,e=>u=e.useInteractionLogger,e=>g=e.useQuery,e=>(v=e.useRef,h=e.useState,_=e.useCallback,f=e.useEffect),e=>y=e.default,e=>C=e.useWindow,e=>k=e.useViewportCategory,e=>P=e.useUserId,e=>m=e.default,e=>T=e.AfterConsent,e=>I=e.useKeyboardEvent,e=>w=e.margin,e=>b=e.default,e=>N=e.default]]},["14euae","17thqz","11b5l5","121h32","jppfwt","fgwvq1","1al4vi","32pwc7","1mqwhq","1o4yt4","gugp1d","ltllz9","1ys6v1","52far5","1x9dv9","1973cc","1gttbj","gw8uw6","1essqv","19b9b1"]]);
