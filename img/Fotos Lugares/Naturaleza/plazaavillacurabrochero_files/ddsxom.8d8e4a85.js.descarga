(this.$WP=this.$WP||[]).push(["ddsxom",(e,i)=>{"use strict";var n,t,a,r,l,o,s,c,d,u,p,m,h,_,g,f,v,b,y,w,x,T,M,C,P,I,D,N,A,E,k,B,F,L,O,j,R,S,W=({title:e,children:i})=>D(m,{marginBottom:"spacing-04",className:"dGhag",children:i?N(A,{children:[D(s,{variant:"supporting-02",color:"secondaryText",marginBottom:"spacing-02",children:e}),i]}):void 0}),K=({isMobile:e,onClick:i})=>D(E,{variant:"primary",fullWidth:e,onClick:i,children:D(c,{id:"plus_trial_confirmation_explore_experiences"})}),Y=({isMobile:e,isTrial:i,...n})=>D(k,{...n,marginTop:e?"spacing-05":void 0,children:D(c,i?{id:"plus_trial_confirmation_manage_membership"}:{id:"plus_paywall_hr_confirmation_manage_subscription"})}),H=({isMobile:e,onExploreExperiences:i,isTrial:n,...t})=>N(m,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[D(F,{isMobile:e,onClick:i}),D(L,{isMobile:e,...t,isTrial:n})]}),z=({hotelId:e,isMobile:i,onNavigateToHr:n,...t})=>e?N(m,{display:"flex",flexDirection:["column","row-reverse","row-reverse"],flexWrap:"wrap",justifyContent:"space-between",alignItems:"center",children:[D(E,{variant:"primary",onClick:n,fullWidth:i,children:D(c,{id:"plus_paywall_hr_confirmation_continue_to_hotel"})}),D(k,{...t,marginTop:i?"spacing-05":void 0,children:D(c,{id:"plus_paywall_hr_confirmation_manage_subscription"})})]}):D(m,{display:"flex",className:"F",children:D(E,{...t,variant:"primary",fullWidth:i,children:D(c,{id:"plus_paywall_hr_confirmation_manage_subscription"})})}),q=(e,i,n)=>{switch(e){case"hotels":default:return{href:"/OptimusAccountManager",target:"_blank",onClick:n};case"attractions":return{href:"/OptimusAccountManager",target:"_blank"};case"memberCenter":return{href:"#",onClick:i}}},U=({variant:e,hotelId:i,isMobile:n,isTrial:t,closeModal:a,onNavigateToHr:r,onNavigateToMembership:l,onExploreExperiences:o})=>{var s=R(e,a,l);switch(e){case"attractions":return D(O,{isMobile:n,onExploreExperiences:o,isTrial:t,...s});case"memberCenter":case"hotels":return D(j,{hotelId:i,isMobile:n,onNavigateToHr:r,...s});default:return null}},V="aFgkL",$="pAdKo Mk MK",G="Hotel_Review",J=({variant:e})=>{switch(e){case"attractions":return D(c,{id:"plus_trial_confirmation_title"});case"hotels":return D(c,{id:"plus_paywall_confirmation_title_v2"});default:return null}},Q=({variant:e})=>{switch(e){case"attractions":return D(c,{id:"plus_trial_confirmation_message_v2"});case"hotels":return D(c,{id:"plus_paywall_hr_confirmation_member_only_message"});default:return null}},X=({subscription:e,variant:i,visibleRef:n,sensitiveFlow:t,subscriptionFetching:a,paymentDataFetching:r,primaryCard:l,creditCardType:o,acctNumberTail:d,expMonth:p,expYear:g,formattedRenewalDate:v,formattedPurchaseDate:b,membershipButtonProps:y,onExploreExperiences:w,intlFormatter:x,primaryTokenizedPayment:T})=>{var M,C,P,I=null==e?void 0:e.trialDetails,E="MOBILE"===h(),k=null==e||null==(M=e.subscriptionPrice)?void 0:M.amountPaid,O=null==I?void 0:I.trialPeriodPrice,j=null!=O&&O.totalAmount&&null!=O&&null!=(C=O.discountAmount)&&C.discountAmount?(null==O?void 0:O.totalAmount)-(null==O||null==(P=O.discountAmount)?void 0:P.discountAmount):0;return N("div",{className:V,ref:n,children:[D(u,{variant:"plus-logo-short",height:44}),D(s,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03",children:D(J,{variant:i})}),t&&D(s,{variant:"title-05",children:D(c,{id:"plus_trial_confirmation_membership_details_subtitle",args:{email:null==t?void 0:t.email}})}),a||r?N(A,{children:[D(_,{height:24,width:"100%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"100%",marginTop:6,marginBottom:6})]}):N(m,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between",children:[k&&D(B,{title:D(c,{id:"plus_confirmation_price_section"}),children:D("span",{children:D(c,{id:"plus_trial_account_management_price_today_v2",args:{0:x.formatCurrencyInteger(j),numMonths:(null==I?void 0:I.trialPeriodDuration)||0}})})}),(null==e?void 0:e.subscriptionNumber)&&D(B,{title:D(c,{id:"plus_confirmation_membership_number_section"}),children:D(s,{variant:"body-01",children:e.subscriptionNumber})}),D(B,{title:D(c,{id:"plus_confirmation_payment_section"}),children:l&&D(f,{paymentMethod:T?{provider:"APPLE_PAY"===T.paymentType?"ApplePay":"PayPal",email:T.email}:{cardType:o,numberTail:d,expiryMonth:p,expiryYear:g},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})}),b&&D(B,{title:D(c,l?{id:"plus_confirmation_date_purchased_section"}:{id:"plus_confirmation_start_date_section"}),children:D(s,{variant:"body-01",children:b})}),v&&D(B,{title:D(c,{id:"plus_confirmation_date_renews_section_v2"}),children:D(s,{variant:"body-01",children:v})}),D(m,{display:"flex",alignItems:"flex-end",marginBottom:"spacing-04",className:"AFojj Na",children:D(L,{isMobile:E,...y,isTrial:!0})})]}),D("div",{className:$}),D(s,{variant:"body-01",marginTop:"spacing-02",marginBottom:"spacing-02",children:D(c,{id:"plus_trial_confirmation_message_v3"})}),D(F,{isMobile:E,onClick:w})]})},Z=({funnelKey:e,closeModal:i,hotelId:n,variant:p="hotels"})=>{var E,k,F,L,O=y(),j=w(),W=t((()=>e||C()),[e]),K=T(),Y=null!==M(),{clearDiscountCode:H}=I();a((()=>{H()}));var[{data:z,fetching:q},U]=P(),[Z,ee]=r(0);a((()=>{!(Z<3)||null!=z&&z.isMember||q||(ee(Z+1),U())}),[Z,U,z,q]);var ie=b((()=>{O({optimusConfirmationModal:{locationId:n,funnelKey:W,pageviewUid:K}})})),ne=x("PLUS_CONFIRM"),te=l(ne);a((()=>{null==te||null==te.current||te.current()}),[te]);var ae=o((e=>{j({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:e,locationId:n,isMemberSignedIn:Y,servletName:G,funnelKey:W}}})}),[W,j,Y,n]),re=o((()=>{i(),ae("HR")}),[i,ae]),le=o((()=>{ae("PlusMembershipCenter")}),[ae]),oe=o((()=>{i()}),[i]),se="MOBILE"===h(),ce=d(),[de]=g(),[{data:ue,fetching:pe}]=v({billingAccountId:null==z?void 0:z.billingAccountId}),me=null!=ue&&ue.storedCardId?ue:null,he=null!=ue&&ue.storedTokenizedPaymentId?ue:null,{acctNumberTail:_e,creditCardType:ge,expMonth:fe,expYear:ve}=me||{},be=null==z?void 0:z.trialDetails,ye="ACTIVE"===(null==be?void 0:be.trialStatus),we=null==z||null==(E=z.subscriptionPrice)?void 0:E.amountPaid,xe=null==z||null==(k=z.nextCharge)?void 0:k.totalAmount,Te=!(null==z||null==(F=z.subscriptionPrice)||!F.discountAmount)&&0===we,Me=!(null==z||null==(L=z.subscriptionPrice)||!L.discountAmount)&&(null==xe||null==we||xe>we),Ce=null!=z&&z.startDate?ce.formatDate("date_long",z.startDate):null,Pe=null;null!=z&&z.renewalDate&&(Pe=ce.formatDate("date_long",z.renewalDate)),null!=z&&z.autoRenew||null==z||!z.endDate||ye||(Pe=D(c,{id:"plus_management_center_non_renewing_member",args:{0:ce.formatDate("date_long",z.endDate)}}));var Ie=D(S,{variant:p,isMobile:se,isTrial:ye,hotelId:n,closeModal:i,onNavigateToHr:re,onNavigateToMembership:le,onExploreExperiences:oe}),De=R(p,i,le);return ye?D(X,{subscription:z,variant:p,visibleRef:ie,sensitiveFlow:de,subscriptionFetching:q,paymentDataFetching:pe,amountPaid:we,primaryCard:me,creditCardType:ge,acctNumberTail:_e,expMonth:fe,expYear:ve,formattedRenewalDate:Pe,formattedPurchaseDate:Ce,membershipButtonProps:De,onExploreExperiences:oe,intlFormatter:ce,primaryTokenizedPayment:he}):N("div",{className:V,ref:ie,children:[D(u,{variant:"plus-logo-short",height:44}),D(s,{variant:"expressive-display-03",marginTop:"spacing-03",marginBottom:"spacing-03",children:D(J,{variant:p})}),D(s,{variant:"body-01",marginTop:"spacing-02",children:D(Q,{variant:p})}),D("div",{className:$}),D(s,{variant:"title-05",children:D(c,{id:"plus_paywall_hr_confirmation_membership_details_title"})}),de&&D(s,{variant:"body-01",marginTop:"spacing-01",children:D(c,{id:"plus_paywall_hr_confirmation_membership_details_subtitle",args:{email:null==de?void 0:de.email}})}),q||pe?N(A,{children:[D(_,{height:24,width:"100%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"70%",marginTop:6}),D(_,{height:24,width:"100%",marginTop:6,marginBottom:6})]}):N(m,{display:"flex",marginTop:"spacing-04",flexDirection:["column","row","row"],flexWrap:"wrap",justifyContent:"space-between",children:[!ye&&(we||Te)&&N(B,{title:D(c,{id:"plus_confirmation_price_section"}),children:[D(s,{variant:"body-01",children:we?D(c,{id:"plus_account_management_price_per_year",args:{0:Math.floor(we)===we?ce.formatCurrencyInteger(we):ce.formatCurrency(we)}}):ce.formatCurrencyInteger(0)}),Me&&me&&D(s,{variant:"supporting-01",children:D(c,{id:"plus_account_management_price_discounted"})})]}),(null==z?void 0:z.subscriptionNumber)&&D(B,{title:D(c,{id:"plus_confirmation_subscription_number_section"}),children:D(s,{variant:"body-01",children:z.subscriptionNumber})}),D(B,{title:D(c,{id:"plus_confirmation_payment_section"}),children:(me||he)&&D(f,{paymentMethod:he?{provider:"APPLE_PAY"===he.paymentType?"ApplePay":"PayPal",email:he.email}:{cardType:ge,numberTail:_e,expiryMonth:fe,expiryYear:ve},hideExpiration:!0,cardNumberLeadMessage:"•••• •••• ••••"})}),Ce&&D(B,{title:D(c,me?{id:"plus_confirmation_date_purchased_section"}:{id:"plus_confirmation_start_date_section"}),children:D(s,{variant:"body-01",children:Ce})}),Pe&&D(B,{title:D(c,{id:"plus_confirmation_date_renews_section"}),children:D(s,{variant:"body-01",children:Pe})})]}),D(m,{marginTop:"spacing-04",marginBottom:"spacing-05",children:Ie})]})},ee=({funnelKey:e,closeModal:i,hotelId:n})=>{var a=w(),r=t((()=>e||C()),[e]),l=null!==M(),s=o((()=>{i(),a({OptimusConfirmationModalInteraction:{optimusConfirmationModalClick:{ctaType:"Dismiss",locationId:n,isMemberSignedIn:l,servletName:G,funnelKey:r}}})}),[i,r,a,l,n]);return D(p,{onClose:s,backgroundColor:"beige",children:D(Z,{funnelKey:r,hotelId:n,closeModal:i})})};return[()=>{B=W,F=K,L=Y,O=H,j=z,R=q,S=U,e({IsConfirmationModalOpen:n(!1),SubscriptionConfirmation:Z,default:ee})},[e=>(n=e.createContext,t=e.useMemo,a=e.useEffect,r=e.useState,l=e.useRef,o=e.useCallback),e=>s=e.default,e=>(c=e.default,d=e.useIntlFormatter),e=>u=e.default,e=>p=e.ModalContainer,e=>m=e.Box,e=>h=e.useViewportCategory,e=>_=e.default,e=>g=e.useSensitiveFlowState,e=>f=e.default,e=>v=e.useDefaultPaymentData,e=>b=e.useOnVisible,e=>y=e.useImpressionLogger,e=>w=e.useInteractionLogger,e=>x=e.usePixelCallback,e=>T=e.usePageviewUid,e=>M=e.useUserId,e=>C=e.uuid,e=>P=e.useOptimusSubscription,e=>I=e.useDiscountCodePersistance,e=>(D=e.jsx,N=e.jsxs,A=e.Fragment),e=>(E=e.default,k=e.BorderlessButton)]]},["1o4yt4","1essqv","17thqz","sw5ax0","1i3sz5","lyyh8d","1ys6v1","u59av4","14lbe8","1os3i1","1shvqi","13btuy","1vumu0","32pwc7","1emwhd","fgwvq1","52far5","1eww82","i9ixrv","36016d","121h32","jppfwt"]]);
